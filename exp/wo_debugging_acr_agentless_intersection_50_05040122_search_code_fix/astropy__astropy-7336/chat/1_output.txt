To resolve this issue, I need to investigate the implementation of the `quantity_input` decorator and specifically how it handles return type annotations. This functionality should be located in the astropy.units.decorators module, given the traceback information provided.

Let me retrieve the source code for any relevant methods within this module to understand and generate a patch.

```python
search_method_in_codebase("quantity_input")
search_code_in_codebase("return_.to(wrapped_signature.return_annotation)")
```
