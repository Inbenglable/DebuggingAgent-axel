2025-05-06 17:56:07.709 | INFO     | swe_log:log_and_print:77 - ['tests/test_build_linkcheck.py::test_raises_for_invalid_status']
2025-05-06 17:56:07.709 | INFO     | swe_log:log_and_print:77 - python -m pip install -e .[test]
2025-05-06 17:56:07.710 | INFO     | swe_log:log_and_print:77 - tox --current-env -epy39 -v -- tests/roots/test-linkcheck-localserver/conf.py tests/roots/test-linkcheck-localserver/index.rst tests/test_build_linkcheck.py
2025-05-06 17:56:07.710 | INFO     | swe_log:log_and_print:77 - /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:08.227 | INFO     | swe_log:log_msg:72 - Remove exist testbed_path: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:09.900 | INFO     | swe_log:log_and_print:77 - Setup testbed environment: sphinx-doc__sphinx-8269
2025-05-06 17:56:09.901 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269 && source /root/miniforge3/bin/activate sphinx-doc__sphinx__3.3            && cd /data/swe-fl/SRC/pysnooper_axel/dbgsnooper && python -m pip install -e . && cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269           && python -m pip install -e .[test] && echo SUCCESS
2025-05-06 17:56:14.837 | INFO     | swe_log:log_msg:72 - Setup testbed: Done
2025-05-06 17:56:24.165 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269 &&                                 source /root/miniforge3/bin/activate sphinx-doc__sphinx__3.3 && python /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py
2025-05-06 17:56:24.705 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-06 17:56:24.706 | INFO     | swe_log:log_msg:72 - 
2025-05-06 17:56:24.706 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-06 17:56:24.706 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 73, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 64, in main
    app = setup_sphinx_app()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 28, in setup_sphinx_app
    with open(conf_py, 'w') as f:
FileNotFoundError: [Errno 2] No such file or directory: '/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/source/conf.py'

2025-05-06 17:56:28.156 | INFO     | swe_log:log_and_print:77 - Query time: 2.66 seconds
2025-05-06 17:56:29.461 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(1/5)
2025-05-06 17:56:31.674 | INFO     | swe_log:log_and_print:77 - Query time: 2.21 seconds
2025-05-06 17:56:31.874 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("linkcheck"). Error: No matching method found for: linkcheck in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:31.907 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("request_head"). Error: No matching method found for: request_head in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:31.940 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_codebase("LinkCheckBuilder"). Error: No matching class found for: LinkCheckBuilder in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:31.940 | INFO     | swe_log:log_and_print:77 - API call 1/4
2025-05-06 17:56:33.595 | INFO     | swe_log:log_and_print:77 - Query time: 1.65 seconds
2025-05-06 17:56:33.600 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_file("sphinx/builders/linkcheck.py", "LinkCheckBuilder"). Error: No matching class found for name: LinkCheckBuilder in file: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py
2025-05-06 17:56:33.602 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_file("sphinx/builders/linkcheck.py", "handle_result"). Error: No matching method found for name: handle_result in file: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py
2025-05-06 17:56:33.602 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_file("sphinx/builders/linkcheck.py", "check_uri"). Error: No matching method found for name: check_uri in file: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py
2025-05-06 17:56:33.603 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_file("sphinx/builders/linkcheck.py", "check"). Error: No matching method found for name: check in file: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py
2025-05-06 17:56:33.603 | INFO     | swe_log:log_and_print:77 - API call 2/4
2025-05-06 17:56:34.945 | INFO     | swe_log:log_and_print:77 - Query time: 1.34 seconds
2025-05-06 17:56:34.948 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(1/5)
2025-05-06 17:56:37.492 | INFO     | swe_log:log_and_print:77 - Query time: 2.54 seconds
2025-05-06 17:56:37.494 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(2/5)
2025-05-06 17:56:41.493 | INFO     | swe_log:log_and_print:77 - Query time: 4.00 seconds
2025-05-06 17:56:41.495 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(3/5)
2025-05-06 17:56:42.678 | INFO     | swe_log:log_and_print:77 - Query time: 1.18 seconds
2025-05-06 17:56:42.679 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(4/5)
2025-05-06 17:56:44.150 | INFO     | swe_log:log_and_print:77 - Query time: 1.47 seconds
2025-05-06 17:56:44.152 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(5/5)
2025-05-06 17:56:44.152 | INFO     | swe_log:log_and_print:77 - Failed to get valid model response after multiple attempts.
2025-05-06 17:56:44.152 | INFO     | swe_log:log_and_print:77 - Whole Process crushed: Failed to get valid model response after multiple attempts.
2025-05-06 17:56:44.153 | INFO     | swe_log:log_and_print:77 - 
Restart...(1/4
2025-05-06 17:56:47.405 | INFO     | swe_log:log_and_print:77 - Query time: 2.90 seconds
2025-05-06 17:56:47.481 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(1/5)
2025-05-06 17:56:49.421 | INFO     | swe_log:log_and_print:77 - Query time: 1.94 seconds
2025-05-06 17:56:49.490 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(2/5)
2025-05-06 17:56:52.587 | INFO     | swe_log:log_and_print:77 - Query time: 3.10 seconds
2025-05-06 17:56:52.755 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("linkcheck"). Error: No matching method found for: linkcheck in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:52.788 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("handle_response"). Error: No matching method found for: handle_response in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:52.820 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("handle_error"). Error: No matching method found for: handle_error in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:52.852 | INFO     | swe_log:log_and_print:77 - API call 1/4
2025-05-06 17:56:55.197 | INFO     | swe_log:log_and_print:77 - Query time: 2.35 seconds
2025-05-06 17:56:55.200 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(1/5)
2025-05-06 17:56:56.511 | INFO     | swe_log:log_and_print:77 - Query time: 1.31 seconds
2025-05-06 17:56:56.513 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(2/5)
2025-05-06 17:56:58.622 | INFO     | swe_log:log_and_print:77 - Query time: 2.11 seconds
2025-05-06 17:56:58.789 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("handle_response"). Error: No matching method found for: handle_response in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:58.822 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("handle_error"). Error: No matching method found for: handle_error in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:58.859 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("check_http_status"). Error: No matching method found for: check_http_status in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:58.893 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("linkcheck"). Error: No matching method found for: linkcheck in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:56:58.893 | INFO     | swe_log:log_and_print:77 - API call 2/4
2025-05-06 17:57:01.238 | INFO     | swe_log:log_and_print:77 - Query time: 2.34 seconds
2025-05-06 17:57:01.242 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_file("sphinx/builders/linkcheck.py", "LinkcheckBuilder.hyperlink_check"). Error: No matching method found for name: LinkcheckBuilder.hyperlink_check in file: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py
2025-05-06 17:57:01.243 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_file("sphinx/builders/linkcheck.py", "LinkcheckBuilder.get_requests_session"). Error: No matching method found for name: LinkcheckBuilder.get_requests_session in file: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py
2025-05-06 17:57:01.245 | INFO     | swe_log:log_and_print:77 - API call 3/4
2025-05-06 17:57:02.308 | INFO     | swe_log:log_and_print:77 - Query time: 1.06 seconds
2025-05-06 17:57:02.310 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(1/5)
2025-05-06 17:57:03.910 | INFO     | swe_log:log_and_print:77 - Query time: 1.60 seconds
2025-05-06 17:57:03.913 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_file("sphinx/builders/linkcheck.py", "LinkcheckBuilder.linkcheck_one"). Error: No matching method found for name: LinkcheckBuilder.linkcheck_one in file: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py
2025-05-06 17:57:03.915 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_file("sphinx/builders/linkcheck.py", "AnchorCheckParser.feed"). Error: No matching method found for name: AnchorCheckParser.feed in file: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py
2025-05-06 17:57:03.916 | INFO     | swe_log:log_and_print:77 - API call 4/4
2025-05-06 17:57:05.544 | INFO     | swe_log:log_and_print:77 - Query time: 1.63 seconds
2025-05-06 17:57:05.545 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(1/5)
2025-05-06 17:57:07.220 | INFO     | swe_log:log_and_print:77 - Query time: 1.67 seconds
2025-05-06 17:57:07.222 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(2/5)
2025-05-06 17:57:08.780 | INFO     | swe_log:log_and_print:77 - Query time: 1.56 seconds
2025-05-06 17:57:08.782 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(3/5)
2025-05-06 17:57:10.421 | INFO     | swe_log:log_and_print:77 - Query time: 1.64 seconds
2025-05-06 17:57:14.108 | INFO     | swe_log:log_and_print:77 - Query time: 3.66 seconds
2025-05-06 17:57:14.111 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:57:14.112 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py.bak
2025-05-06 17:57:14.112 | INFO     | swe_log:log_msg:72 - Applied 1 edits to sphinx/builders/linkcheck.py
2025-05-06 17:57:14.112 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269 &&                                 source /root/miniforge3/bin/activate sphinx-doc__sphinx__3.3 && python /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py
2025-05-06 17:57:14.660 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-06 17:57:14.661 | INFO     | swe_log:log_msg:72 - 
2025-05-06 17:57:14.661 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-06 17:57:14.661 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 73, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 64, in main
    app = setup_sphinx_app()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 28, in setup_sphinx_app
    with open(conf_py, 'w') as f:
FileNotFoundError: [Errno 2] No such file or directory: '/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/source/conf.py'

2025-05-06 17:57:18.637 | INFO     | swe_log:log_and_print:77 - Query time: 3.95 seconds
2025-05-06 17:57:18.639 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(1/4)
2025-05-06 17:57:26.234 | INFO     | swe_log:log_and_print:77 - Query time: 7.25 seconds
2025-05-06 17:57:26.236 | INFO     | swe_log:log_msg:72 - Invalid edit format: '=======' is not in list
2025-05-06 17:57:26.236 | INFO     | swe_log:log_and_print:77 - Error applying patch: Malformed search/replace edit block. Are you sure the format follows the example of a *SEARCH/REPLACE* edit correctly?, Retrying..
2025-05-06 17:57:31.619 | INFO     | swe_log:log_and_print:77 - Query time: 5.38 seconds
2025-05-06 17:57:31.622 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:57:31.625 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:57:31.625 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py.bak
2025-05-06 17:57:31.626 | INFO     | swe_log:log_msg:72 - Applied 2 edits to sphinx/builders/linkcheck.py
2025-05-06 17:57:31.626 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269 &&                                 source /root/miniforge3/bin/activate sphinx-doc__sphinx__3.3 && python /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py
2025-05-06 17:57:32.178 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-06 17:57:32.179 | INFO     | swe_log:log_msg:72 - 
2025-05-06 17:57:32.179 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-06 17:57:32.179 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 73, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 64, in main
    app = setup_sphinx_app()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 28, in setup_sphinx_app
    with open(conf_py, 'w') as f:
FileNotFoundError: [Errno 2] No such file or directory: '/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/source/conf.py'

2025-05-06 17:57:34.701 | INFO     | swe_log:log_and_print:77 - Query time: 2.49 seconds
2025-05-06 17:57:34.703 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(2/4)
2025-05-06 17:57:48.517 | INFO     | swe_log:log_and_print:77 - Query time: 13.47 seconds
2025-05-06 17:57:48.520 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:57:48.522 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:57:48.523 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py.bak
2025-05-06 17:57:48.524 | INFO     | swe_log:log_msg:72 - Applied 2 edits to sphinx/builders/linkcheck.py
2025-05-06 17:57:48.524 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269 &&                                 source /root/miniforge3/bin/activate sphinx-doc__sphinx__3.3 && python /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py
2025-05-06 17:57:49.071 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-06 17:57:49.072 | INFO     | swe_log:log_msg:72 - 
2025-05-06 17:57:49.072 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-06 17:57:49.073 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 73, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 64, in main
    app = setup_sphinx_app()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 28, in setup_sphinx_app
    with open(conf_py, 'w') as f:
FileNotFoundError: [Errno 2] No such file or directory: '/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/source/conf.py'

2025-05-06 17:57:53.853 | INFO     | swe_log:log_and_print:77 - Query time: 4.75 seconds
2025-05-06 17:57:53.855 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(3/4)
2025-05-06 17:58:01.427 | INFO     | swe_log:log_and_print:77 - Query time: 7.21 seconds
2025-05-06 17:58:01.431 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:58:01.432 | INFO     | swe_log:log_msg:72 - Search block not found in sphinx/builders/linkcheck.py:
(line   22) broken    https://google.com/test.txt#test - Anchor 'test' not found
2025-05-06 17:58:01.432 | INFO     | swe_log:log_and_print:77 - Error applying patch: Search pattern not found in file., Retrying..
2025-05-06 17:58:09.604 | INFO     | swe_log:log_and_print:77 - Query time: 8.17 seconds
2025-05-06 17:58:09.607 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:58:09.609 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:58:09.610 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py.bak
2025-05-06 17:58:09.610 | INFO     | swe_log:log_msg:72 - Applied 2 edits to sphinx/builders/linkcheck.py
2025-05-06 17:58:09.611 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269 &&                                 source /root/miniforge3/bin/activate sphinx-doc__sphinx__3.3 && python /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py
2025-05-06 17:58:10.066 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-06 17:58:10.067 | INFO     | swe_log:log_msg:72 - 
2025-05-06 17:58:10.067 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-06 17:58:10.067 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 5, in <module>
    from sphinx.builders.linkcheck import CheckExternalLinksBuilder
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py", line 185
    try:
    ^
SyntaxError: invalid syntax

2025-05-06 17:58:13.468 | INFO     | swe_log:log_and_print:77 - Query time: 3.38 seconds
2025-05-06 17:58:13.481 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(4/4)
2025-05-06 17:58:22.036 | INFO     | swe_log:log_and_print:77 - Query time: 8.21 seconds
2025-05-06 17:58:22.040 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:58:22.041 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:58:22.041 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py.bak
2025-05-06 17:58:22.041 | INFO     | swe_log:log_msg:72 - Applied 2 edits to sphinx/builders/linkcheck.py
2025-05-06 17:58:22.042 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269 &&                                 source /root/miniforge3/bin/activate sphinx-doc__sphinx__3.3 && python /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py
2025-05-06 17:58:22.581 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-06 17:58:22.582 | INFO     | swe_log:log_msg:72 - 
2025-05-06 17:58:22.582 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-06 17:58:22.583 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 73, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 64, in main
    app = setup_sphinx_app()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 28, in setup_sphinx_app
    with open(conf_py, 'w') as f:
FileNotFoundError: [Errno 2] No such file or directory: '/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/source/conf.py'

2025-05-06 17:58:26.176 | INFO     | swe_log:log_and_print:77 - Query time: 3.57 seconds
2025-05-06 17:58:26.178 | INFO     | swe_log:log_and_print:77 - Unable to pass reviewer
2025-05-06 17:58:26.178 | INFO     | swe_log:log_and_print:77 - 
Restart...(2/4
2025-05-06 17:58:29.154 | INFO     | swe_log:log_and_print:77 - Query time: 2.63 seconds
2025-05-06 17:58:32.959 | INFO     | swe_log:log_and_print:77 - Query time: 3.60 seconds
2025-05-06 17:58:32.961 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid filter reply results found.
Retrying..(1/5)
2025-05-06 17:58:35.989 | INFO     | swe_log:log_and_print:77 - Query time: 3.03 seconds
2025-05-06 17:58:35.990 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid filter reply results found.
Retrying..(2/5)
2025-05-06 17:58:39.931 | INFO     | swe_log:log_and_print:77 - Query time: 3.94 seconds
2025-05-06 17:58:39.933 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(3/5)
2025-05-06 17:58:43.404 | INFO     | swe_log:log_and_print:77 - Query time: 3.47 seconds
2025-05-06 17:58:43.405 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(4/5)
2025-05-06 17:58:46.802 | INFO     | swe_log:log_and_print:77 - Query time: 3.40 seconds
2025-05-06 17:58:46.803 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(5/5)
2025-05-06 17:58:46.804 | INFO     | swe_log:log_and_print:77 - Failed to get valid model response after multiple attempts.
2025-05-06 17:58:46.805 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("check"). Error: Failed to get valid model response after multiple attempts.
2025-05-06 17:58:46.842 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("report"). Error: No matching method found for: report in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:58:46.875 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_codebase("LinkChecker"). Error: No matching class found for: LinkChecker in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:58:46.875 | INFO     | swe_log:log_and_print:77 - API call 1/4
2025-05-06 17:58:48.342 | INFO     | swe_log:log_and_print:77 - Query time: 1.47 seconds
2025-05-06 17:58:52.126 | INFO     | swe_log:log_and_print:77 - Query time: 3.65 seconds
2025-05-06 17:58:52.128 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(1/5)
2025-05-06 17:58:59.827 | INFO     | swe_log:log_and_print:77 - Query time: 7.70 seconds
2025-05-06 17:58:59.829 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("check"). Error: No valid filter reply results found.
2025-05-06 17:58:59.865 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("report_status"). Error: No matching method found for: report_status in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:58:59.897 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_codebase("LinkCheckBuilder"). Error: No matching class found for: LinkCheckBuilder in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:58:59.897 | INFO     | swe_log:log_and_print:77 - Whole Process crushed: No valid API call result.
2025-05-06 17:58:59.897 | INFO     | swe_log:log_and_print:77 - 
Restart...(3/4
2025-05-06 17:59:02.548 | INFO     | swe_log:log_and_print:77 - Query time: 2.31 seconds
2025-05-06 17:59:02.588 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(1/5)
2025-05-06 17:59:04.635 | INFO     | swe_log:log_and_print:77 - Query time: 2.05 seconds
2025-05-06 17:59:04.768 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(2/5)
2025-05-06 17:59:14.645 | INFO     | swe_log:log_and_print:77 - Query time: 9.88 seconds
2025-05-06 17:59:14.797 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(3/5)
2025-05-06 17:59:17.884 | INFO     | swe_log:log_and_print:77 - Query time: 3.09 seconds
2025-05-06 17:59:18.019 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("linkcheck"). Error: No matching method found for: linkcheck in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:59:18.051 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_codebase("linkcheck"). Error: No matching class found for: linkcheck in directory: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
2025-05-06 17:59:18.085 | INFO     | swe_log:log_and_print:77 - API call 1/4
2025-05-06 17:59:19.542 | INFO     | swe_log:log_and_print:77 - Query time: 1.46 seconds
2025-05-06 17:59:19.543 | INFO     | swe_log:log_and_print:77 - Ready to generate
2025-05-06 17:59:23.679 | INFO     | swe_log:log_and_print:77 - Query time: 4.11 seconds
2025-05-06 17:59:23.681 | INFO     | swe_log:log_msg:72 - Search block not found in sphinx/builders/linkcheck.py:
    anchor_found = self.check_anchor(response, anchor)
2025-05-06 17:59:23.682 | INFO     | swe_log:log_and_print:77 - Error applying patch: Search pattern not found in file., Retrying..
2025-05-06 17:59:33.064 | INFO     | swe_log:log_and_print:77 - Query time: 9.38 seconds
2025-05-06 17:59:33.066 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:59:33.066 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py.bak
2025-05-06 17:59:33.066 | INFO     | swe_log:log_msg:72 - Applied 1 edits to sphinx/builders/linkcheck.py
2025-05-06 17:59:33.067 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269 &&                                 source /root/miniforge3/bin/activate sphinx-doc__sphinx__3.3 && python /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py
2025-05-06 17:59:33.610 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-06 17:59:33.611 | INFO     | swe_log:log_msg:72 - 
2025-05-06 17:59:33.611 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-06 17:59:33.611 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 73, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 64, in main
    app = setup_sphinx_app()
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 28, in setup_sphinx_app
    with open(conf_py, 'w') as f:
FileNotFoundError: [Errno 2] No such file or directory: '/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/source/conf.py'

2025-05-06 17:59:40.410 | INFO     | swe_log:log_and_print:77 - Query time: 6.77 seconds
2025-05-06 17:59:40.412 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(1/4)
2025-05-06 17:59:46.270 | INFO     | swe_log:log_and_print:77 - Query time: 5.51 seconds
2025-05-06 17:59:46.273 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:59:46.274 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 17:59:46.275 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py.bak
2025-05-06 17:59:46.275 | INFO     | swe_log:log_msg:72 - Applied 2 edits to sphinx/builders/linkcheck.py
2025-05-06 17:59:46.275 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269 &&                                 source /root/miniforge3/bin/activate sphinx-doc__sphinx__3.3 && python /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py
2025-05-06 17:59:46.818 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-06 17:59:46.819 | INFO     | swe_log:log_msg:72 - 
2025-05-06 17:59:46.819 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-06 17:59:46.819 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/reproduce.py", line 5, in <module>
    from sphinx.builders.linkcheck import CheckExternalLinksBuilder
  File "/data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py", line 62, in <module>
    def check_anchor(response: requests.Response, anchor: str) -> bool:
AttributeError: module 'sphinx.util.requests' has no attribute 'Response'

2025-05-06 17:59:51.078 | INFO     | swe_log:log_and_print:77 - Query time: 4.23 seconds
2025-05-06 17:59:51.080 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(2/4)
2025-05-06 18:00:11.727 | INFO     | swe_log:log_and_print:77 - Query time: 20.30 seconds
2025-05-06 18:00:11.730 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 18:00:11.730 | INFO     | swe_log:log_msg:72 - Search block not found in sphinx/builders/linkcheck.py:
if check_anchor(response, anchor):
    self.info(bold('found') + ': %s' % anchor)
else:
    self.warn(bold('broken') + ': %s - Anchor '%s' not found' % (uri, anchor))
2025-05-06 18:00:11.730 | INFO     | swe_log:log_and_print:77 - Error applying patch: Search pattern not found in file., Retrying..
2025-05-06 18:00:21.877 | INFO     | swe_log:log_and_print:77 - Query time: 10.15 seconds
2025-05-06 18:00:21.879 | INFO     | swe_log:log_msg:72 - Error decoding JSON: Invalid \escape: line 4 column 193 (char 1119)
2025-05-06 18:00:21.879 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
Expected json format in response but ERROR occurs: Invalid \escape: line 4 column 193 (char 1119)
Retrying..(1/5)
2025-05-06 18:00:38.736 | INFO     | swe_log:log_and_print:77 - Query time: 16.86 seconds
2025-05-06 18:00:38.739 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 18:00:38.740 | INFO     | swe_log:log_msg:72 - Search block not found in sphinx/builders/linkcheck.py:
if check_anchor(response, anchor):
    self.info(bold('found') + ': %s' % anchor)
else:
    self.warn(bold('broken') + ': %s - Anchor '%s' not found' % (uri, anchor))
2025-05-06 18:00:38.740 | INFO     | swe_log:log_and_print:77 - Error applying patch: Search pattern not found in file., Retrying..
2025-05-06 18:00:45.378 | INFO     | swe_log:log_and_print:77 - Query time: 6.64 seconds
2025-05-06 18:00:45.379 | INFO     | swe_log:log_msg:72 - Error decoding JSON: Invalid \escape: line 4 column 193 (char 1113)
2025-05-06 18:00:45.379 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
Expected json format in response but ERROR occurs: Invalid \escape: line 4 column 193 (char 1113)
Retrying..(1/5)
2025-05-06 18:00:58.411 | INFO     | swe_log:log_and_print:77 - Query time: 13.03 seconds
2025-05-06 18:00:58.413 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 18:00:58.414 | INFO     | swe_log:log_msg:72 - Search block not found in sphinx/builders/linkcheck.py:
if check_anchor(response, anchor):
    self.info(bold('found') + ': %s' % anchor)
else:
    self.warn(bold('broken') + ': %s - Anchor '%s' not found' % (uri, anchor))
2025-05-06 18:00:58.414 | INFO     | swe_log:log_and_print:77 - Error applying patch: Search pattern not found in file., Retrying..
2025-05-06 18:01:06.879 | INFO     | swe_log:log_and_print:77 - Query time: 8.46 seconds
2025-05-06 18:01:06.881 | INFO     | swe_log:log_msg:72 - Error decoding JSON: Invalid \escape: line 4 column 193 (char 1217)
2025-05-06 18:01:06.881 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
Expected json format in response but ERROR occurs: Invalid \escape: line 4 column 193 (char 1217)
Retrying..(1/5)
2025-05-06 18:01:18.281 | INFO     | swe_log:log_and_print:77 - Query time: 11.40 seconds
2025-05-06 18:01:18.283 | INFO     | swe_log:log_msg:72 - Error decoding JSON: Invalid \escape: line 4 column 193 (char 1177)
2025-05-06 18:01:18.283 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
Expected json format in response but ERROR occurs: Invalid \escape: line 4 column 193 (char 1177)
Retrying..(2/5)
2025-05-06 18:01:25.800 | INFO     | swe_log:log_and_print:77 - Query time: 7.52 seconds
2025-05-06 18:01:25.802 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 18:01:25.802 | INFO     | swe_log:log_msg:72 - Search block not found in sphinx/builders/linkcheck.py:
if check_anchor(response, anchor):
    self.info(bold('found') + ': %s' % anchor)
else:
    self.warn(bold('broken') + ': %s - Anchor '%s' not found' % (uri, anchor))
2025-05-06 18:01:25.802 | INFO     | swe_log:log_and_print:77 - Error applying patch: Search pattern not found in file., Retrying..
2025-05-06 18:01:25.802 | INFO     | swe_log:log_and_print:77 - Failed to apply patch after multiple attempts.
2025-05-06 18:01:25.803 | INFO     | swe_log:log_and_print:77 - Whole Process crushed: Failed to apply patch after multiple attempts.
2025-05-06 18:01:25.803 | INFO     | swe_log:log_and_print:77 - 
Restart...(4/4
2025-05-06 18:01:25.803 | INFO     | swe_log:log_and_print:77 - Debugging process completed. Start evaluation
2025-05-06 18:01:26.127 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 18:01:26.128 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-06 18:01:26.128 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/builders/linkcheck.py.bak
2025-05-06 18:01:26.128 | INFO     | swe_log:log_msg:72 - Applied 2 edits to sphinx/builders/linkcheck.py
2025-05-06 18:01:28.903 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-06 18:01:28.904 | INFO     | swe_log:log_msg:72 - py39: commands[0]> pytest -rA --durations 25 tests/roots/test-linkcheck-localserver/conf.py tests/roots/test-linkcheck-localserver/index.rst tests/test_build_linkcheck.py
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.9.21, pytest-8.3.4, pluggy-1.5.0
cachedir: .tox/py39/.pytest_cache
libraries: Sphinx-3.3.0+/1e2ccd8f0, docutils-0.21.2
base tempdir: /tmp/pytest-of-root/pytest-447
rootdir: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269
configfile: setup.cfg
plugins: cov-6.0.0
collected 6 items

tests/test_build_linkcheck.py [31mE[0m[31mE[0m[31mE[0m[31mE[0m[31mE[0m[31mE[0m[31m                                     [100%][0m

==================================== ERRORS ====================================
[31m[1m_______________________ ERROR at setup of test_defaults ________________________[0m

test_params = {'shared_result': None}
app_params = app_params(args=['linkcheck'], kwargs={'freshenv': True, 'srcdir': path('/tmp/pytest-of-root/pytest-447/linkcheck')})
make_app = <function make_app.<locals>.make at 0x7f8f55eda670>
shared_result = <sphinx.testing.fixtures.SharedResult object at 0x7f8f5601eac0>

    [0m[37m@pytest[39;49;00m.fixture(scope=[33m'[39;49;00m[33mfunction[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mapp[39;49;00m(test_params: Dict, app_params: Tuple[Dict, Dict], make_app: Callable,[90m[39;49;00m
            shared_result: SharedResult) -> Generator[SphinxTestApp, [94mNone[39;49;00m, [94mNone[39;49;00m]:[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    provides sphinx.application.Sphinx object[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        args, kwargs = app_params[90m[39;49;00m
>       app_ = make_app(*args, **kwargs)[90m[39;49;00m

[1m[31msphinx/testing/fixtures.py[0m:135: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31msphinx/testing/fixtures.py[0m:181: in make
    [0mapp_ = SphinxTestApp(*args, **kwargs)  [90m# type: Any[39;49;00m[90m[39;49;00m
[1m[31msphinx/testing/util.py[0m:134: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m(srcdir, confdir, outdir, doctreedir,[90m[39;49;00m
[1m[31msphinx/application.py[0m:240: in __init__
    [0m[96mself[39;49;00m.setup_extension(extension)[90m[39;49;00m
[1m[31msphinx/application.py[0m:398: in setup_extension
    [0m[96mself[39;49;00m.registry.load_extension([96mself[39;49;00m, extname)[90m[39;49;00m
[1m[31msphinx/registry.py[0m:416: in load_extension
    [0mmod = import_module(extname)[90m[39;49;00m
[1m[31m/root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/importlib/__init__.py[0m:127: in import_module
    [0m[94mreturn[39;49;00m _bootstrap._gcd_import(name[level:], package, level)[90m[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[33m"""[39;49;00m
    [33m    sphinx.builders.linkcheck[39;49;00m
    [33m    ~~~~~~~~~~~~~~~~~~~~~~~~~[39;49;00m
    [33m[39;49;00m
    [33m    The CheckExternalLinksBuilder class.[39;49;00m
    [33m[39;49;00m
    [33m    :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.[39;49;00m
    [33m    :license: BSD, see LICENSE for details.[39;49;00m
    [33m"""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mjson[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mqueue[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mre[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96msocket[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mthreading[39;49;00m[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mhtml[39;49;00m[04m[96m.[39;49;00m[04m[96mparser[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTMLParser[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mos[39;49;00m[90m [39;49;00m[94mimport[39;49;00m path[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mtyping[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Any, Dict, List, Set, Tuple[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96murllib[39;49;00m[04m[96m.[39;49;00m[04m[96mparse[39;49;00m[90m [39;49;00m[94mimport[39;49;00m unquote, urlparse[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[90m [39;49;00m[94mimport[39;49;00m nodes[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Node[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mrequests[39;49;00m[04m[96m.[39;49;00m[04m[96mexceptions[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTTPError[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mapplication[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Sphinx[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mbuilders[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Builder[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mlocale[39;49;00m[90m [39;49;00m[94mimport[39;49;00m __[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[90m [39;49;00m[94mimport[39;49;00m encode_uri, requests, logging[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mconsole[39;49;00m[90m [39;49;00m[94mimport[39;49;00m (  [90m# type: ignore[39;49;00m[90m[39;49;00m
        purple, red, darkgreen, darkgray, turquoise[90m[39;49;00m
    )[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m get_node_line[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mrequests[39;49;00m[90m [39;49;00m[94mimport[39;49;00m is_ssl_error[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    logger = logging.getLogger([91m__name__[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
    uri_re = re.compile([33m'[39;49;00m[33m([a-z]+:)?//[39;49;00m[33m'[39;49;00m)  [90m# matches to foo:// and // (a protocol relative URL)[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    DEFAULT_REQUEST_HEADERS = {[90m[39;49;00m
        [33m'[39;49;00m[33mAccept[39;49;00m[33m'[39;49;00m: [33m'[39;49;00m[33mtext/html,application/xhtml+xml;q=0.9,*/*;q=0.8[39;49;00m[33m'[39;49;00m,[90m[39;49;00m
    }[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    [94mclass[39;49;00m[90m [39;49;00m[04m[92mAnchorCheckParser[39;49;00m(HTMLParser):[90m[39;49;00m
    [90m    [39;49;00m[33m"""Specialized HTML parser that looks for a specific anchor."""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92m__init__[39;49;00m([96mself[39;49;00m, search_anchor: [96mstr[39;49;00m) -> [94mNone[39;49;00m:[90m[39;49;00m
            [96msuper[39;49;00m().[92m__init__[39;49;00m()[90m[39;49;00m
    [90m[39;49;00m
            [96mself[39;49;00m.search_anchor = search_anchor[90m[39;49;00m
            [96mself[39;49;00m.found = [94mFalse[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92mhandle_starttag[39;49;00m([96mself[39;49;00m, tag: Any, attrs: Any) -> [94mNone[39;49;00m:[90m[39;49;00m
            [94mfor[39;49;00m key, value [95min[39;49;00m attrs:[90m[39;49;00m
                [94mif[39;49;00m key [95min[39;49;00m ([33m'[39;49;00m[33mid[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mname[39;49;00m[33m'[39;49;00m) [95mand[39;49;00m value == [96mself[39;49;00m.search_anchor:[90m[39;49;00m
                    [96mself[39;49;00m.found = [94mTrue[39;49;00m[90m[39;49;00m
                    [94mbreak[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
>   [94mdef[39;49;00m[90m [39;49;00m[92mcheck_anchor[39;49;00m(response: requests.Response, anchor: [96mstr[39;49;00m) -> [96mbool[39;49;00m:[90m[39;49;00m
[1m[31mE   AttributeError: module 'sphinx.util.requests' has no attribute 'Response'[0m

[1m[31msphinx/builders/linkcheck.py[0m:62: AttributeError
[31m[1m_____________________ ERROR at setup of test_defaults_json _____________________[0m

test_params = {'shared_result': None}
app_params = app_params(args=['linkcheck'], kwargs={'freshenv': True, 'srcdir': path('/tmp/pytest-of-root/pytest-447/linkcheck')})
make_app = <function make_app.<locals>.make at 0x7f8f5577b670>
shared_result = <sphinx.testing.fixtures.SharedResult object at 0x7f8f55780fa0>

    [0m[37m@pytest[39;49;00m.fixture(scope=[33m'[39;49;00m[33mfunction[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mapp[39;49;00m(test_params: Dict, app_params: Tuple[Dict, Dict], make_app: Callable,[90m[39;49;00m
            shared_result: SharedResult) -> Generator[SphinxTestApp, [94mNone[39;49;00m, [94mNone[39;49;00m]:[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    provides sphinx.application.Sphinx object[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        args, kwargs = app_params[90m[39;49;00m
>       app_ = make_app(*args, **kwargs)[90m[39;49;00m

[1m[31msphinx/testing/fixtures.py[0m:135: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31msphinx/testing/fixtures.py[0m:181: in make
    [0mapp_ = SphinxTestApp(*args, **kwargs)  [90m# type: Any[39;49;00m[90m[39;49;00m
[1m[31msphinx/testing/util.py[0m:134: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m(srcdir, confdir, outdir, doctreedir,[90m[39;49;00m
[1m[31msphinx/application.py[0m:240: in __init__
    [0m[96mself[39;49;00m.setup_extension(extension)[90m[39;49;00m
[1m[31msphinx/application.py[0m:398: in setup_extension
    [0m[96mself[39;49;00m.registry.load_extension([96mself[39;49;00m, extname)[90m[39;49;00m
[1m[31msphinx/registry.py[0m:416: in load_extension
    [0mmod = import_module(extname)[90m[39;49;00m
[1m[31m/root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/importlib/__init__.py[0m:127: in import_module
    [0m[94mreturn[39;49;00m _bootstrap._gcd_import(name[level:], package, level)[90m[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[33m"""[39;49;00m
    [33m    sphinx.builders.linkcheck[39;49;00m
    [33m    ~~~~~~~~~~~~~~~~~~~~~~~~~[39;49;00m
    [33m[39;49;00m
    [33m    The CheckExternalLinksBuilder class.[39;49;00m
    [33m[39;49;00m
    [33m    :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.[39;49;00m
    [33m    :license: BSD, see LICENSE for details.[39;49;00m
    [33m"""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mjson[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mqueue[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mre[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96msocket[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mthreading[39;49;00m[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mhtml[39;49;00m[04m[96m.[39;49;00m[04m[96mparser[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTMLParser[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mos[39;49;00m[90m [39;49;00m[94mimport[39;49;00m path[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mtyping[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Any, Dict, List, Set, Tuple[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96murllib[39;49;00m[04m[96m.[39;49;00m[04m[96mparse[39;49;00m[90m [39;49;00m[94mimport[39;49;00m unquote, urlparse[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[90m [39;49;00m[94mimport[39;49;00m nodes[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Node[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mrequests[39;49;00m[04m[96m.[39;49;00m[04m[96mexceptions[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTTPError[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mapplication[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Sphinx[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mbuilders[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Builder[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mlocale[39;49;00m[90m [39;49;00m[94mimport[39;49;00m __[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[90m [39;49;00m[94mimport[39;49;00m encode_uri, requests, logging[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mconsole[39;49;00m[90m [39;49;00m[94mimport[39;49;00m (  [90m# type: ignore[39;49;00m[90m[39;49;00m
        purple, red, darkgreen, darkgray, turquoise[90m[39;49;00m
    )[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m get_node_line[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mrequests[39;49;00m[90m [39;49;00m[94mimport[39;49;00m is_ssl_error[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    logger = logging.getLogger([91m__name__[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
    uri_re = re.compile([33m'[39;49;00m[33m([a-z]+:)?//[39;49;00m[33m'[39;49;00m)  [90m# matches to foo:// and // (a protocol relative URL)[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    DEFAULT_REQUEST_HEADERS = {[90m[39;49;00m
        [33m'[39;49;00m[33mAccept[39;49;00m[33m'[39;49;00m: [33m'[39;49;00m[33mtext/html,application/xhtml+xml;q=0.9,*/*;q=0.8[39;49;00m[33m'[39;49;00m,[90m[39;49;00m
    }[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    [94mclass[39;49;00m[90m [39;49;00m[04m[92mAnchorCheckParser[39;49;00m(HTMLParser):[90m[39;49;00m
    [90m    [39;49;00m[33m"""Specialized HTML parser that looks for a specific anchor."""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92m__init__[39;49;00m([96mself[39;49;00m, search_anchor: [96mstr[39;49;00m) -> [94mNone[39;49;00m:[90m[39;49;00m
            [96msuper[39;49;00m().[92m__init__[39;49;00m()[90m[39;49;00m
    [90m[39;49;00m
            [96mself[39;49;00m.search_anchor = search_anchor[90m[39;49;00m
            [96mself[39;49;00m.found = [94mFalse[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92mhandle_starttag[39;49;00m([96mself[39;49;00m, tag: Any, attrs: Any) -> [94mNone[39;49;00m:[90m[39;49;00m
            [94mfor[39;49;00m key, value [95min[39;49;00m attrs:[90m[39;49;00m
                [94mif[39;49;00m key [95min[39;49;00m ([33m'[39;49;00m[33mid[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mname[39;49;00m[33m'[39;49;00m) [95mand[39;49;00m value == [96mself[39;49;00m.search_anchor:[90m[39;49;00m
                    [96mself[39;49;00m.found = [94mTrue[39;49;00m[90m[39;49;00m
                    [94mbreak[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
>   [94mdef[39;49;00m[90m [39;49;00m[92mcheck_anchor[39;49;00m(response: requests.Response, anchor: [96mstr[39;49;00m) -> [96mbool[39;49;00m:[90m[39;49;00m
[1m[31mE   AttributeError: module 'sphinx.util.requests' has no attribute 'Response'[0m

[1m[31msphinx/builders/linkcheck.py[0m:62: AttributeError
[31m[1m____________________ ERROR at setup of test_anchors_ignored ____________________[0m

test_params = {'shared_result': None}
app_params = app_params(args=['linkcheck'], kwargs={'freshenv': True, 'confoverrides': {'linkcheck_anchors_ignore': ['^!', '^top$']...'https://www.google.com/image2.png', 'path/to/notfound']}, 'srcdir': path('/tmp/pytest-of-root/pytest-447/linkcheck')})
make_app = <function make_app.<locals>.make at 0x7f8f55ca5c10>
shared_result = <sphinx.testing.fixtures.SharedResult object at 0x7f8f55656f70>

    [0m[37m@pytest[39;49;00m.fixture(scope=[33m'[39;49;00m[33mfunction[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mapp[39;49;00m(test_params: Dict, app_params: Tuple[Dict, Dict], make_app: Callable,[90m[39;49;00m
            shared_result: SharedResult) -> Generator[SphinxTestApp, [94mNone[39;49;00m, [94mNone[39;49;00m]:[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    provides sphinx.application.Sphinx object[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        args, kwargs = app_params[90m[39;49;00m
>       app_ = make_app(*args, **kwargs)[90m[39;49;00m

[1m[31msphinx/testing/fixtures.py[0m:135: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31msphinx/testing/fixtures.py[0m:181: in make
    [0mapp_ = SphinxTestApp(*args, **kwargs)  [90m# type: Any[39;49;00m[90m[39;49;00m
[1m[31msphinx/testing/util.py[0m:134: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m(srcdir, confdir, outdir, doctreedir,[90m[39;49;00m
[1m[31msphinx/application.py[0m:240: in __init__
    [0m[96mself[39;49;00m.setup_extension(extension)[90m[39;49;00m
[1m[31msphinx/application.py[0m:398: in setup_extension
    [0m[96mself[39;49;00m.registry.load_extension([96mself[39;49;00m, extname)[90m[39;49;00m
[1m[31msphinx/registry.py[0m:416: in load_extension
    [0mmod = import_module(extname)[90m[39;49;00m
[1m[31m/root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/importlib/__init__.py[0m:127: in import_module
    [0m[94mreturn[39;49;00m _bootstrap._gcd_import(name[level:], package, level)[90m[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[33m"""[39;49;00m
    [33m    sphinx.builders.linkcheck[39;49;00m
    [33m    ~~~~~~~~~~~~~~~~~~~~~~~~~[39;49;00m
    [33m[39;49;00m
    [33m    The CheckExternalLinksBuilder class.[39;49;00m
    [33m[39;49;00m
    [33m    :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.[39;49;00m
    [33m    :license: BSD, see LICENSE for details.[39;49;00m
    [33m"""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mjson[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mqueue[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mre[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96msocket[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mthreading[39;49;00m[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mhtml[39;49;00m[04m[96m.[39;49;00m[04m[96mparser[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTMLParser[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mos[39;49;00m[90m [39;49;00m[94mimport[39;49;00m path[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mtyping[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Any, Dict, List, Set, Tuple[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96murllib[39;49;00m[04m[96m.[39;49;00m[04m[96mparse[39;49;00m[90m [39;49;00m[94mimport[39;49;00m unquote, urlparse[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[90m [39;49;00m[94mimport[39;49;00m nodes[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Node[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mrequests[39;49;00m[04m[96m.[39;49;00m[04m[96mexceptions[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTTPError[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mapplication[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Sphinx[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mbuilders[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Builder[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mlocale[39;49;00m[90m [39;49;00m[94mimport[39;49;00m __[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[90m [39;49;00m[94mimport[39;49;00m encode_uri, requests, logging[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mconsole[39;49;00m[90m [39;49;00m[94mimport[39;49;00m (  [90m# type: ignore[39;49;00m[90m[39;49;00m
        purple, red, darkgreen, darkgray, turquoise[90m[39;49;00m
    )[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m get_node_line[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mrequests[39;49;00m[90m [39;49;00m[94mimport[39;49;00m is_ssl_error[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    logger = logging.getLogger([91m__name__[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
    uri_re = re.compile([33m'[39;49;00m[33m([a-z]+:)?//[39;49;00m[33m'[39;49;00m)  [90m# matches to foo:// and // (a protocol relative URL)[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    DEFAULT_REQUEST_HEADERS = {[90m[39;49;00m
        [33m'[39;49;00m[33mAccept[39;49;00m[33m'[39;49;00m: [33m'[39;49;00m[33mtext/html,application/xhtml+xml;q=0.9,*/*;q=0.8[39;49;00m[33m'[39;49;00m,[90m[39;49;00m
    }[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    [94mclass[39;49;00m[90m [39;49;00m[04m[92mAnchorCheckParser[39;49;00m(HTMLParser):[90m[39;49;00m
    [90m    [39;49;00m[33m"""Specialized HTML parser that looks for a specific anchor."""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92m__init__[39;49;00m([96mself[39;49;00m, search_anchor: [96mstr[39;49;00m) -> [94mNone[39;49;00m:[90m[39;49;00m
            [96msuper[39;49;00m().[92m__init__[39;49;00m()[90m[39;49;00m
    [90m[39;49;00m
            [96mself[39;49;00m.search_anchor = search_anchor[90m[39;49;00m
            [96mself[39;49;00m.found = [94mFalse[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92mhandle_starttag[39;49;00m([96mself[39;49;00m, tag: Any, attrs: Any) -> [94mNone[39;49;00m:[90m[39;49;00m
            [94mfor[39;49;00m key, value [95min[39;49;00m attrs:[90m[39;49;00m
                [94mif[39;49;00m key [95min[39;49;00m ([33m'[39;49;00m[33mid[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mname[39;49;00m[33m'[39;49;00m) [95mand[39;49;00m value == [96mself[39;49;00m.search_anchor:[90m[39;49;00m
                    [96mself[39;49;00m.found = [94mTrue[39;49;00m[90m[39;49;00m
                    [94mbreak[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
>   [94mdef[39;49;00m[90m [39;49;00m[92mcheck_anchor[39;49;00m(response: requests.Response, anchor: [96mstr[39;49;00m) -> [96mbool[39;49;00m:[90m[39;49;00m
[1m[31mE   AttributeError: module 'sphinx.util.requests' has no attribute 'Response'[0m

[1m[31msphinx/builders/linkcheck.py[0m:62: AttributeError
[31m[1m_______________ ERROR at setup of test_raises_for_invalid_status _______________[0m

test_params = {'shared_result': None}
app_params = app_params(args=['linkcheck'], kwargs={'freshenv': True, 'srcdir': path('/tmp/pytest-of-root/pytest-447/linkcheck-localserver')})
make_app = <function make_app.<locals>.make at 0x7f8f56048550>
shared_result = <sphinx.testing.fixtures.SharedResult object at 0x7f8f5603bb20>

    [0m[37m@pytest[39;49;00m.fixture(scope=[33m'[39;49;00m[33mfunction[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mapp[39;49;00m(test_params: Dict, app_params: Tuple[Dict, Dict], make_app: Callable,[90m[39;49;00m
            shared_result: SharedResult) -> Generator[SphinxTestApp, [94mNone[39;49;00m, [94mNone[39;49;00m]:[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    provides sphinx.application.Sphinx object[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        args, kwargs = app_params[90m[39;49;00m
>       app_ = make_app(*args, **kwargs)[90m[39;49;00m

[1m[31msphinx/testing/fixtures.py[0m:135: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31msphinx/testing/fixtures.py[0m:181: in make
    [0mapp_ = SphinxTestApp(*args, **kwargs)  [90m# type: Any[39;49;00m[90m[39;49;00m
[1m[31msphinx/testing/util.py[0m:134: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m(srcdir, confdir, outdir, doctreedir,[90m[39;49;00m
[1m[31msphinx/application.py[0m:240: in __init__
    [0m[96mself[39;49;00m.setup_extension(extension)[90m[39;49;00m
[1m[31msphinx/application.py[0m:398: in setup_extension
    [0m[96mself[39;49;00m.registry.load_extension([96mself[39;49;00m, extname)[90m[39;49;00m
[1m[31msphinx/registry.py[0m:416: in load_extension
    [0mmod = import_module(extname)[90m[39;49;00m
[1m[31m/root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/importlib/__init__.py[0m:127: in import_module
    [0m[94mreturn[39;49;00m _bootstrap._gcd_import(name[level:], package, level)[90m[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[33m"""[39;49;00m
    [33m    sphinx.builders.linkcheck[39;49;00m
    [33m    ~~~~~~~~~~~~~~~~~~~~~~~~~[39;49;00m
    [33m[39;49;00m
    [33m    The CheckExternalLinksBuilder class.[39;49;00m
    [33m[39;49;00m
    [33m    :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.[39;49;00m
    [33m    :license: BSD, see LICENSE for details.[39;49;00m
    [33m"""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mjson[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mqueue[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mre[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96msocket[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mthreading[39;49;00m[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mhtml[39;49;00m[04m[96m.[39;49;00m[04m[96mparser[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTMLParser[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mos[39;49;00m[90m [39;49;00m[94mimport[39;49;00m path[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mtyping[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Any, Dict, List, Set, Tuple[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96murllib[39;49;00m[04m[96m.[39;49;00m[04m[96mparse[39;49;00m[90m [39;49;00m[94mimport[39;49;00m unquote, urlparse[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[90m [39;49;00m[94mimport[39;49;00m nodes[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Node[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mrequests[39;49;00m[04m[96m.[39;49;00m[04m[96mexceptions[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTTPError[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mapplication[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Sphinx[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mbuilders[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Builder[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mlocale[39;49;00m[90m [39;49;00m[94mimport[39;49;00m __[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[90m [39;49;00m[94mimport[39;49;00m encode_uri, requests, logging[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mconsole[39;49;00m[90m [39;49;00m[94mimport[39;49;00m (  [90m# type: ignore[39;49;00m[90m[39;49;00m
        purple, red, darkgreen, darkgray, turquoise[90m[39;49;00m
    )[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m get_node_line[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mrequests[39;49;00m[90m [39;49;00m[94mimport[39;49;00m is_ssl_error[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    logger = logging.getLogger([91m__name__[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
    uri_re = re.compile([33m'[39;49;00m[33m([a-z]+:)?//[39;49;00m[33m'[39;49;00m)  [90m# matches to foo:// and // (a protocol relative URL)[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    DEFAULT_REQUEST_HEADERS = {[90m[39;49;00m
        [33m'[39;49;00m[33mAccept[39;49;00m[33m'[39;49;00m: [33m'[39;49;00m[33mtext/html,application/xhtml+xml;q=0.9,*/*;q=0.8[39;49;00m[33m'[39;49;00m,[90m[39;49;00m
    }[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    [94mclass[39;49;00m[90m [39;49;00m[04m[92mAnchorCheckParser[39;49;00m(HTMLParser):[90m[39;49;00m
    [90m    [39;49;00m[33m"""Specialized HTML parser that looks for a specific anchor."""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92m__init__[39;49;00m([96mself[39;49;00m, search_anchor: [96mstr[39;49;00m) -> [94mNone[39;49;00m:[90m[39;49;00m
            [96msuper[39;49;00m().[92m__init__[39;49;00m()[90m[39;49;00m
    [90m[39;49;00m
            [96mself[39;49;00m.search_anchor = search_anchor[90m[39;49;00m
            [96mself[39;49;00m.found = [94mFalse[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92mhandle_starttag[39;49;00m([96mself[39;49;00m, tag: Any, attrs: Any) -> [94mNone[39;49;00m:[90m[39;49;00m
            [94mfor[39;49;00m key, value [95min[39;49;00m attrs:[90m[39;49;00m
                [94mif[39;49;00m key [95min[39;49;00m ([33m'[39;49;00m[33mid[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mname[39;49;00m[33m'[39;49;00m) [95mand[39;49;00m value == [96mself[39;49;00m.search_anchor:[90m[39;49;00m
                    [96mself[39;49;00m.found = [94mTrue[39;49;00m[90m[39;49;00m
                    [94mbreak[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
>   [94mdef[39;49;00m[90m [39;49;00m[92mcheck_anchor[39;49;00m(response: requests.Response, anchor: [96mstr[39;49;00m) -> [96mbool[39;49;00m:[90m[39;49;00m
[1m[31mE   AttributeError: module 'sphinx.util.requests' has no attribute 'Response'[0m

[1m[31msphinx/builders/linkcheck.py[0m:62: AttributeError
[31m[1m_________________________ ERROR at setup of test_auth __________________________[0m

test_params = {'shared_result': None}
app_params = app_params(args=['linkcheck'], kwargs={'freshenv': True, 'confoverrides': {'linkcheck_auth': [('.+google\\.com/image.+', 'authinfo1'), ('.+google\\.com.+', 'authinfo2')]}, 'srcdir': path('/tmp/pytest-of-root/pytest-447/linkcheck')})
make_app = <function make_app.<locals>.make at 0x7f8f55855670>
shared_result = <sphinx.testing.fixtures.SharedResult object at 0x7f8f56064eb0>

    [0m[37m@pytest[39;49;00m.fixture(scope=[33m'[39;49;00m[33mfunction[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mapp[39;49;00m(test_params: Dict, app_params: Tuple[Dict, Dict], make_app: Callable,[90m[39;49;00m
            shared_result: SharedResult) -> Generator[SphinxTestApp, [94mNone[39;49;00m, [94mNone[39;49;00m]:[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    provides sphinx.application.Sphinx object[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        args, kwargs = app_params[90m[39;49;00m
>       app_ = make_app(*args, **kwargs)[90m[39;49;00m

[1m[31msphinx/testing/fixtures.py[0m:135: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31msphinx/testing/fixtures.py[0m:181: in make
    [0mapp_ = SphinxTestApp(*args, **kwargs)  [90m# type: Any[39;49;00m[90m[39;49;00m
[1m[31msphinx/testing/util.py[0m:134: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m(srcdir, confdir, outdir, doctreedir,[90m[39;49;00m
[1m[31msphinx/application.py[0m:240: in __init__
    [0m[96mself[39;49;00m.setup_extension(extension)[90m[39;49;00m
[1m[31msphinx/application.py[0m:398: in setup_extension
    [0m[96mself[39;49;00m.registry.load_extension([96mself[39;49;00m, extname)[90m[39;49;00m
[1m[31msphinx/registry.py[0m:416: in load_extension
    [0mmod = import_module(extname)[90m[39;49;00m
[1m[31m/root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/importlib/__init__.py[0m:127: in import_module
    [0m[94mreturn[39;49;00m _bootstrap._gcd_import(name[level:], package, level)[90m[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[33m"""[39;49;00m
    [33m    sphinx.builders.linkcheck[39;49;00m
    [33m    ~~~~~~~~~~~~~~~~~~~~~~~~~[39;49;00m
    [33m[39;49;00m
    [33m    The CheckExternalLinksBuilder class.[39;49;00m
    [33m[39;49;00m
    [33m    :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.[39;49;00m
    [33m    :license: BSD, see LICENSE for details.[39;49;00m
    [33m"""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mjson[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mqueue[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mre[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96msocket[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mthreading[39;49;00m[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mhtml[39;49;00m[04m[96m.[39;49;00m[04m[96mparser[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTMLParser[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mos[39;49;00m[90m [39;49;00m[94mimport[39;49;00m path[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mtyping[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Any, Dict, List, Set, Tuple[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96murllib[39;49;00m[04m[96m.[39;49;00m[04m[96mparse[39;49;00m[90m [39;49;00m[94mimport[39;49;00m unquote, urlparse[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[90m [39;49;00m[94mimport[39;49;00m nodes[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Node[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mrequests[39;49;00m[04m[96m.[39;49;00m[04m[96mexceptions[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTTPError[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mapplication[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Sphinx[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mbuilders[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Builder[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mlocale[39;49;00m[90m [39;49;00m[94mimport[39;49;00m __[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[90m [39;49;00m[94mimport[39;49;00m encode_uri, requests, logging[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mconsole[39;49;00m[90m [39;49;00m[94mimport[39;49;00m (  [90m# type: ignore[39;49;00m[90m[39;49;00m
        purple, red, darkgreen, darkgray, turquoise[90m[39;49;00m
    )[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m get_node_line[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mrequests[39;49;00m[90m [39;49;00m[94mimport[39;49;00m is_ssl_error[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    logger = logging.getLogger([91m__name__[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
    uri_re = re.compile([33m'[39;49;00m[33m([a-z]+:)?//[39;49;00m[33m'[39;49;00m)  [90m# matches to foo:// and // (a protocol relative URL)[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    DEFAULT_REQUEST_HEADERS = {[90m[39;49;00m
        [33m'[39;49;00m[33mAccept[39;49;00m[33m'[39;49;00m: [33m'[39;49;00m[33mtext/html,application/xhtml+xml;q=0.9,*/*;q=0.8[39;49;00m[33m'[39;49;00m,[90m[39;49;00m
    }[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    [94mclass[39;49;00m[90m [39;49;00m[04m[92mAnchorCheckParser[39;49;00m(HTMLParser):[90m[39;49;00m
    [90m    [39;49;00m[33m"""Specialized HTML parser that looks for a specific anchor."""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92m__init__[39;49;00m([96mself[39;49;00m, search_anchor: [96mstr[39;49;00m) -> [94mNone[39;49;00m:[90m[39;49;00m
            [96msuper[39;49;00m().[92m__init__[39;49;00m()[90m[39;49;00m
    [90m[39;49;00m
            [96mself[39;49;00m.search_anchor = search_anchor[90m[39;49;00m
            [96mself[39;49;00m.found = [94mFalse[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92mhandle_starttag[39;49;00m([96mself[39;49;00m, tag: Any, attrs: Any) -> [94mNone[39;49;00m:[90m[39;49;00m
            [94mfor[39;49;00m key, value [95min[39;49;00m attrs:[90m[39;49;00m
                [94mif[39;49;00m key [95min[39;49;00m ([33m'[39;49;00m[33mid[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mname[39;49;00m[33m'[39;49;00m) [95mand[39;49;00m value == [96mself[39;49;00m.search_anchor:[90m[39;49;00m
                    [96mself[39;49;00m.found = [94mTrue[39;49;00m[90m[39;49;00m
                    [94mbreak[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
>   [94mdef[39;49;00m[90m [39;49;00m[92mcheck_anchor[39;49;00m(response: requests.Response, anchor: [96mstr[39;49;00m) -> [96mbool[39;49;00m:[90m[39;49;00m
[1m[31mE   AttributeError: module 'sphinx.util.requests' has no attribute 'Response'[0m

[1m[31msphinx/builders/linkcheck.py[0m:62: AttributeError
[31m[1m_______________ ERROR at setup of test_linkcheck_request_headers _______________[0m

test_params = {'shared_result': None}
app_params = app_params(args=['linkcheck'], kwargs={'freshenv': True, 'confoverrides': {'linkcheck_request_headers': {'https://loca...: 'application/json'}, '*': {'X-Secret': 'open sesami'}}}, 'srcdir': path('/tmp/pytest-of-root/pytest-447/linkcheck')})
make_app = <function make_app.<locals>.make at 0x7f8f56037820>
shared_result = <sphinx.testing.fixtures.SharedResult object at 0x7f8f55789be0>

    [0m[37m@pytest[39;49;00m.fixture(scope=[33m'[39;49;00m[33mfunction[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mapp[39;49;00m(test_params: Dict, app_params: Tuple[Dict, Dict], make_app: Callable,[90m[39;49;00m
            shared_result: SharedResult) -> Generator[SphinxTestApp, [94mNone[39;49;00m, [94mNone[39;49;00m]:[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    provides sphinx.application.Sphinx object[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        args, kwargs = app_params[90m[39;49;00m
>       app_ = make_app(*args, **kwargs)[90m[39;49;00m

[1m[31msphinx/testing/fixtures.py[0m:135: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31msphinx/testing/fixtures.py[0m:181: in make
    [0mapp_ = SphinxTestApp(*args, **kwargs)  [90m# type: Any[39;49;00m[90m[39;49;00m
[1m[31msphinx/testing/util.py[0m:134: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m(srcdir, confdir, outdir, doctreedir,[90m[39;49;00m
[1m[31msphinx/application.py[0m:240: in __init__
    [0m[96mself[39;49;00m.setup_extension(extension)[90m[39;49;00m
[1m[31msphinx/application.py[0m:398: in setup_extension
    [0m[96mself[39;49;00m.registry.load_extension([96mself[39;49;00m, extname)[90m[39;49;00m
[1m[31msphinx/registry.py[0m:416: in load_extension
    [0mmod = import_module(extname)[90m[39;49;00m
[1m[31m/root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/importlib/__init__.py[0m:127: in import_module
    [0m[94mreturn[39;49;00m _bootstrap._gcd_import(name[level:], package, level)[90m[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[33m"""[39;49;00m
    [33m    sphinx.builders.linkcheck[39;49;00m
    [33m    ~~~~~~~~~~~~~~~~~~~~~~~~~[39;49;00m
    [33m[39;49;00m
    [33m    The CheckExternalLinksBuilder class.[39;49;00m
    [33m[39;49;00m
    [33m    :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.[39;49;00m
    [33m    :license: BSD, see LICENSE for details.[39;49;00m
    [33m"""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mjson[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mqueue[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mre[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96msocket[39;49;00m[90m[39;49;00m
    [94mimport[39;49;00m[90m [39;49;00m[04m[96mthreading[39;49;00m[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mhtml[39;49;00m[04m[96m.[39;49;00m[04m[96mparser[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTMLParser[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mos[39;49;00m[90m [39;49;00m[94mimport[39;49;00m path[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mtyping[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Any, Dict, List, Set, Tuple[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96murllib[39;49;00m[04m[96m.[39;49;00m[04m[96mparse[39;49;00m[90m [39;49;00m[94mimport[39;49;00m unquote, urlparse[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[90m [39;49;00m[94mimport[39;49;00m nodes[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mdocutils[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Node[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96mrequests[39;49;00m[04m[96m.[39;49;00m[04m[96mexceptions[39;49;00m[90m [39;49;00m[94mimport[39;49;00m HTTPError[90m[39;49;00m
    [90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mapplication[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Sphinx[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mbuilders[39;49;00m[90m [39;49;00m[94mimport[39;49;00m Builder[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mlocale[39;49;00m[90m [39;49;00m[94mimport[39;49;00m __[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[90m [39;49;00m[94mimport[39;49;00m encode_uri, requests, logging[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mconsole[39;49;00m[90m [39;49;00m[94mimport[39;49;00m (  [90m# type: ignore[39;49;00m[90m[39;49;00m
        purple, red, darkgreen, darkgray, turquoise[90m[39;49;00m
    )[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mnodes[39;49;00m[90m [39;49;00m[94mimport[39;49;00m get_node_line[90m[39;49;00m
    [94mfrom[39;49;00m[90m [39;49;00m[04m[96msphinx[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[04m[96m.[39;49;00m[04m[96mrequests[39;49;00m[90m [39;49;00m[94mimport[39;49;00m is_ssl_error[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    logger = logging.getLogger([91m__name__[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
    uri_re = re.compile([33m'[39;49;00m[33m([a-z]+:)?//[39;49;00m[33m'[39;49;00m)  [90m# matches to foo:// and // (a protocol relative URL)[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    DEFAULT_REQUEST_HEADERS = {[90m[39;49;00m
        [33m'[39;49;00m[33mAccept[39;49;00m[33m'[39;49;00m: [33m'[39;49;00m[33mtext/html,application/xhtml+xml;q=0.9,*/*;q=0.8[39;49;00m[33m'[39;49;00m,[90m[39;49;00m
    }[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
    [94mclass[39;49;00m[90m [39;49;00m[04m[92mAnchorCheckParser[39;49;00m(HTMLParser):[90m[39;49;00m
    [90m    [39;49;00m[33m"""Specialized HTML parser that looks for a specific anchor."""[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92m__init__[39;49;00m([96mself[39;49;00m, search_anchor: [96mstr[39;49;00m) -> [94mNone[39;49;00m:[90m[39;49;00m
            [96msuper[39;49;00m().[92m__init__[39;49;00m()[90m[39;49;00m
    [90m[39;49;00m
            [96mself[39;49;00m.search_anchor = search_anchor[90m[39;49;00m
            [96mself[39;49;00m.found = [94mFalse[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mdef[39;49;00m[90m [39;49;00m[92mhandle_starttag[39;49;00m([96mself[39;49;00m, tag: Any, attrs: Any) -> [94mNone[39;49;00m:[90m[39;49;00m
            [94mfor[39;49;00m key, value [95min[39;49;00m attrs:[90m[39;49;00m
                [94mif[39;49;00m key [95min[39;49;00m ([33m'[39;49;00m[33mid[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mname[39;49;00m[33m'[39;49;00m) [95mand[39;49;00m value == [96mself[39;49;00m.search_anchor:[90m[39;49;00m
                    [96mself[39;49;00m.found = [94mTrue[39;49;00m[90m[39;49;00m
                    [94mbreak[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
    [90m[39;49;00m
>   [94mdef[39;49;00m[90m [39;49;00m[92mcheck_anchor[39;49;00m(response: requests.Response, anchor: [96mstr[39;49;00m) -> [96mbool[39;49;00m:[90m[39;49;00m
[1m[31mE   AttributeError: module 'sphinx.util.requests' has no attribute 'Response'[0m

[1m[31msphinx/builders/linkcheck.py[0m:62: AttributeError
[33m=============================== warnings summary ===============================[0m
sphinx/util/docutils.py:45
  /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/util/docutils.py:45: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.
    __version_info__ = tuple(LooseVersion(docutils.__version__).version)

sphinx/registry.py:22
  /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/registry.py:22: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
    from pkg_resources import iter_entry_points

../../../../../root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/site-packages/pkg_resources/__init__.py:3149
../../../../../root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/site-packages/pkg_resources/__init__.py:3149
../../../../../root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/site-packages/pkg_resources/__init__.py:3149
../../../../../root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/site-packages/pkg_resources/__init__.py:3149
  /root/miniforge3/envs/sphinx-doc__sphinx__3.3/lib/python3.9/site-packages/pkg_resources/__init__.py:3149: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('sphinxcontrib')`.
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

sphinx/directives/patches.py:15
  /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269/sphinx/directives/patches.py:15: DeprecationWarning: The `docutils.parsers.rst.directive.html` module will be removed in Docutils 2.0. Since Docutils 0.18, the "Meta" node is defined in `docutils.parsers.rst.directives.misc`.
    from docutils.parsers.rst.directives import images, html, tables

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============================= slowest 25 durations =============================
0.22s setup    tests/test_build_linkcheck.py::test_defaults
0.01s setup    tests/test_build_linkcheck.py::test_raises_for_invalid_status
0.01s setup    tests/test_build_linkcheck.py::test_anchors_ignored
0.01s setup    tests/test_build_linkcheck.py::test_defaults_json
0.01s setup    tests/test_build_linkcheck.py::test_auth
0.01s setup    tests/test_build_linkcheck.py::test_linkcheck_request_headers

(6 durations < 0.005s hidden.  Use -vv to show these durations.)
[36m[1m=========================== short test summary info ============================[0m
[31mERROR[0m tests/test_build_linkcheck.py::[1mtest_defaults[0m - AttributeError: module 'sphinx.util.requests' has no attribute 'Response'
[31mERROR[0m tests/test_build_linkcheck.py::[1mtest_defaults_json[0m - AttributeError: module 'sphinx.util.requests' has no attribute 'Response'
[31mERROR[0m tests/test_build_linkcheck.py::[1mtest_anchors_ignored[0m - AttributeError: module 'sphinx.util.requests' has no attribute 'Response'
[31mERROR[0m tests/test_build_linkcheck.py::[1mtest_raises_for_invalid_status[0m - AttributeError: module 'sphinx.util.requests' has no attribute 'Response'
[31mERROR[0m tests/test_build_linkcheck.py::[1mtest_auth[0m - AttributeError: module 'sphinx.util.requests' has no attribute 'Response'
[31mERROR[0m tests/test_build_linkcheck.py::[1mtest_linkcheck_request_headers[0m - AttributeError: module 'sphinx.util.requests' has no attribute 'Response'
[31m======================== [33m7 warnings[0m, [31m[1m6 errors[0m[31m in 0.82s[0m[31m =========================[0m
py39: exit 1 (1.62 seconds) /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-8269> pytest -rA --durations 25 tests/roots/test-linkcheck-localserver/conf.py tests/roots/test-linkcheck-localserver/index.rst tests/test_build_linkcheck.py pid=1808131
  py39: FAIL code 1 (1.66=setup[0.04]+cmd[1.62] seconds)
  evaluation failed :( (1.79 seconds)


2025-05-06 18:01:28.906 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-06 18:01:28.907 | INFO     | swe_log:log_msg:72 - ERROR conda.cli.main_run:execute(125): `conda run tox --current-env -epy39 -v -- tests/roots/test-linkcheck-localserver/conf.py tests/roots/test-linkcheck-localserver/index.rst tests/test_build_linkcheck.py` failed. (See above for error)

