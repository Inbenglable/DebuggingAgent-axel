2025-04-29 16:07:19.225 | INFO     | swe_log:log_and_print:77 - ['test_decimal_numbers (utils_tests.test_numberformat.TestNumberFormat)', 'test_decimal_subclass (utils_tests.test_numberformat.TestNumberFormat)']
2025-04-29 16:07:19.225 | INFO     | swe_log:log_and_print:77 - python -m pip install -e .
2025-04-29 16:07:19.225 | INFO     | swe_log:log_and_print:77 - ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 utils_tests.test_numberformat
2025-04-29 16:07:19.225 | INFO     | swe_log:log_and_print:77 - /data/swe-fl/TMP/testbed/django__django-11206
2025-04-29 16:07:22.036 | INFO     | swe_log:log_msg:72 - Remove exist testbed_path: /data/swe-fl/TMP/testbed/django__django-11206
2025-04-29 16:07:30.636 | INFO     | swe_log:log_and_print:77 - Setup testbed environment: django__django-11206
2025-04-29 16:07:30.636 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/django__django-11206 && source /root/miniforge3/bin/activate django__django__3.0            && cd /data/swe-fl/SRC/pysnooper_axel/dbgsnooper && python -m pip install -e . && cd /data/swe-fl/TMP/testbed/django__django-11206           && python -m pip install -e . && echo SUCCESS
2025-04-29 16:07:33.865 | INFO     | swe_log:log_msg:72 - Setup testbed: Done
2025-04-29 16:07:39.128 | INFO     | swe_log:log_and_print:77 - Query time: 2.00 seconds
2025-04-29 16:07:46.262 | INFO     | swe_log:log_and_print:77 - Query time: 2.66 seconds
2025-04-29 16:07:46.264 | INFO     | swe_log:log_and_print:77 - API call 1/4
2025-04-29 16:07:47.797 | INFO     | swe_log:log_and_print:77 - Query time: 1.53 seconds
2025-04-29 16:07:47.798 | INFO     | swe_log:log_and_print:77 - Ready to generate
2025-04-29 16:08:14.149 | INFO     | swe_log:log_and_print:77 - Query time: 26.33 seconds
2025-04-29 16:08:14.152 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 16:08:14.153 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/django__django-11206/django/utils/numberformat.py.bak
2025-04-29 16:08:14.153 | INFO     | swe_log:log_msg:72 - Applied 1 edits to django/utils/numberformat.py
2025-04-29 16:08:14.154 | INFO     | swe_log:log_and_print:77 - Debugging process completed. Start evaluation
2025-04-29 16:08:15.298 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 16:08:15.299 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/django__django-11206/django/utils/numberformat.py.bak
2025-04-29 16:08:15.299 | INFO     | swe_log:log_msg:72 - Applied 1 edits to django/utils/numberformat.py
2025-04-29 16:08:16.810 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-04-29 16:08:16.811 | INFO     | swe_log:log_msg:72 - Testing against Django installed in '/data/swe-fl/TMP/testbed/django__django-11206/django'
Importing application utils_tests
Skipping setup of unused database(s): default, other.
System check identified no issues (0 silenced).


2025-04-29 16:08:16.811 | INFO     | swe_log:log_msg:72 - STDERR:
2025-04-29 16:08:16.811 | INFO     | swe_log:log_msg:72 - test_decimal_numbers (utils_tests.test_numberformat.TestNumberFormat) ... ERROR
test_decimal_subclass (utils_tests.test_numberformat.TestNumberFormat) ... ok
test_float_numbers (utils_tests.test_numberformat.TestNumberFormat) ... ok
test_format_number (utils_tests.test_numberformat.TestNumberFormat) ... ok
test_format_string (utils_tests.test_numberformat.TestNumberFormat) ... ok
test_large_number (utils_tests.test_numberformat.TestNumberFormat) ... ok

======================================================================
ERROR: test_decimal_numbers (utils_tests.test_numberformat.TestNumberFormat)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/django__django-11206/tests/utils_tests/test_numberformat.py", line 66, in test_decimal_numbers
    self.assertEqual(nformat(Decimal('1234'), '.', decimal_pos=2), '1234.00')
  File "/data/swe-fl/TMP/testbed/django__django-11206/django/utils/numberformat.py", line 34, in format
    if decimal_pos is not None and exponent < 0 and int_part_zeros + abs(exponent) > decimal_pos:
NameError: name 'exponent' is not defined

----------------------------------------------------------------------
Ran 6 tests in 0.001s

FAILED (errors=1)

ERROR conda.cli.main_run:execute(125): `conda run ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 utils_tests.test_numberformat` failed. (See above for error)

