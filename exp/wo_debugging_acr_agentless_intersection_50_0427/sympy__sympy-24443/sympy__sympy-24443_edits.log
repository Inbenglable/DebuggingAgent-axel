### sympy/combinatorics/homomorphisms.py
<<<<<<< SEARCH
                if isinstance(domain, PermutationGroup) and r[i] in gens:
=======
                if isinstance(domain, PermutationGroup) and (r[i] in gens or r[i]**-1 in gens):
>>>>>>> REPLACE

### sympy/combinatorics/homomorphisms.py
<<<<<<< SEARCH
                else:
                    s = r[i]
                if s in images:
=======
                if r[i] in gens:
                    s = domain.generators[gens.index(r[i])]
                elif r[i]**-1 in gens:
                    s = domain.generators[gens.index(r[i]**-1)]
                if isinstance(s, Permutation):
                    if s in images:
>>>>>>> REPLACE

### sympy/combinatorics/homomorphisms.py
<<<<<<< SEARCH
                elif s**-1 in images:
                    w = w*images[s**-1]**power
=======
                    elif s**-1 in images:
                        w = w*images[s**-1]**power
>>>>>>> REPLACE
