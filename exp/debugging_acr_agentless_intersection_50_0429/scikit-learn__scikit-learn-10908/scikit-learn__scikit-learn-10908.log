2025-04-29 06:41:30.092 | INFO     | swe_log:log_and_print:77 - ['sklearn/feature_extraction/tests/test_text.py::test_feature_names']
2025-04-29 06:41:30.092 | INFO     | swe_log:log_and_print:77 - python -m pip install -v --no-use-pep517 --no-build-isolation -e .
2025-04-29 06:41:30.093 | INFO     | swe_log:log_and_print:77 - pytest -rA sklearn/feature_extraction/tests/test_text.py
2025-04-29 06:41:30.093 | INFO     | swe_log:log_and_print:77 - /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908
2025-04-29 06:41:30.697 | INFO     | swe_log:log_msg:72 - Remove exist testbed_path: /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908
2025-04-29 06:41:38.528 | INFO     | swe_log:log_and_print:77 - Setup testbed environment: scikit-learn__scikit-learn-10908
2025-04-29 06:41:38.528 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908 && source /root/miniforge3/bin/activate scikit-learn__scikit-learn__0.20            && cd /data/swe-fl/SRC/pysnooper_axel/dbgsnooper && python -m pip install -e . && cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908           && python -m pip install -v --no-use-pep517 --no-build-isolation -e . && echo SUCCESS
2025-04-29 06:44:10.179 | INFO     | swe_log:log_msg:72 - Setup testbed: Done
2025-04-29 06:44:18.305 | INFO     | swe_log:log_and_print:77 - Query time: 3.46 seconds
2025-04-29 06:44:18.317 | INFO     | swe_log:log_and_print:77 - deep_dive_debugging depth: 1
2025-04-29 06:44:18.318 | INFO     | swe_log:log_and_print:77 - choose method: sklearn/feature_extraction/text.py:VectorizerMixin._check_vocabulary
2025-04-29 06:44:22.550 | INFO     | swe_log:log_and_print:77 - Query time: 2.87 seconds
2025-04-29 06:44:22.553 | INFO     | swe_log:log_and_print:77 - choose buggy method: sklearn/feature_extraction/text.py:VectorizerMixin._check_vocabulary
2025-04-29 06:44:22.554 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908 &&                                 source /root/miniforge3/bin/activate scikit-learn__scikit-learn__0.20 && python /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py
2025-04-29 06:44:23.203 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-04-29 06:44:23.204 | INFO     | swe_log:log_msg:72 - 
2025-04-29 06:44:23.204 | INFO     | swe_log:log_msg:72 - STDERR:
2025-04-29 06:44:23.204 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py"
    28: feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    996: self._check_vocabulary()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    304: check_is_fitted(self, 'vocabulary_', msg=msg),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/utils/validation.py"
    860: raise NotFittedError(msg % {'name': type(estimator).__name__})
NotFittedError: CountVectorizer - Vocabulary wasn't fitted.
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 28, in main
    feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 996, in get_feature_names
    self._check_vocabulary()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 304, in _check_vocabulary
    check_is_fitted(self, 'vocabulary_', msg=msg),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/utils/validation.py", line 860, in check_is_fitted
    raise NotFittedError(msg % {'name': type(estimator).__name__})
sklearn.exceptions.NotFittedError: CountVectorizer - Vocabulary wasn't fitted.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 38, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 35, in main
    assert False, "get_feature_names() raised an exception when it should not have"
AssertionError: get_feature_names() raised an exception when it should not have

2025-04-29 06:44:26.929 | INFO     | swe_log:log_and_print:77 - Query time: 3.70 seconds
2025-04-29 06:44:26.936 | INFO     | swe_log:log_and_print:77 - API call 1/2
2025-04-29 06:44:37.814 | INFO     | swe_log:log_and_print:77 - Query time: 10.88 seconds
2025-04-29 06:44:37.817 | INFO     | swe_log:log_and_print:77 - API call 2/2
2025-04-29 06:44:39.060 | INFO     | swe_log:log_and_print:77 - Query time: 1.24 seconds
2025-04-29 06:44:48.755 | INFO     | swe_log:log_and_print:77 - Query time: 9.67 seconds
2025-04-29 06:44:48.760 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 06:44:48.761 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py.bak
2025-04-29 06:44:48.762 | INFO     | swe_log:log_msg:72 - Applied 1 edits to sklearn/feature_extraction/text.py
2025-04-29 06:44:48.763 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908 &&                                 source /root/miniforge3/bin/activate scikit-learn__scikit-learn__0.20 && python /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py
2025-04-29 06:44:49.413 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-04-29 06:44:49.413 | INFO     | swe_log:log_msg:72 - 
2025-04-29 06:44:49.413 | INFO     | swe_log:log_msg:72 - STDERR:
2025-04-29 06:44:49.413 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py"
    28: feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    1010: return [t for t, i in sorted(six.iteritems(self.vocabulary_),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/externals/six.py"
    439: return iter(getattr(d, _iteritems)(**kw))
AttributeError: 'list' object has no attribute 'items'
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 28, in main
    feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 1010, in get_feature_names
    return [t for t, i in sorted(six.iteritems(self.vocabulary_),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/externals/six.py", line 439, in iteritems
    return iter(getattr(d, _iteritems)(**kw))
AttributeError: 'list' object has no attribute 'items'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 38, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 35, in main
    assert False, "get_feature_names() raised an exception when it should not have"
AssertionError: get_feature_names() raised an exception when it should not have

2025-04-29 06:45:05.114 | INFO     | swe_log:log_and_print:77 - Query time: 15.67 seconds
2025-04-29 06:45:05.116 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(1/4)
2025-04-29 06:45:11.987 | INFO     | swe_log:log_and_print:77 - Query time: 6.34 seconds
2025-04-29 06:45:11.993 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 06:45:11.994 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py.bak
2025-04-29 06:45:11.995 | INFO     | swe_log:log_msg:72 - Applied 1 edits to sklearn/feature_extraction/text.py
2025-04-29 06:45:11.995 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908 &&                                 source /root/miniforge3/bin/activate scikit-learn__scikit-learn__0.20 && python /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py
2025-04-29 06:45:12.639 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-04-29 06:45:12.639 | INFO     | swe_log:log_msg:72 - 
2025-04-29 06:45:12.639 | INFO     | swe_log:log_msg:72 - STDERR:
2025-04-29 06:45:12.639 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py"
    28: feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    1000: return [t for t, i in sorted(six.iteritems(self.vocabulary_),
AttributeError: 'CountVectorizer' object has no attribute 'vocabulary_'
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 28, in main
    feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 1000, in get_feature_names
    return [t for t, i in sorted(six.iteritems(self.vocabulary_),
AttributeError: 'CountVectorizer' object has no attribute 'vocabulary_'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 38, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 35, in main
    assert False, "get_feature_names() raised an exception when it should not have"
AssertionError: get_feature_names() raised an exception when it should not have

2025-04-29 06:45:27.439 | INFO     | swe_log:log_and_print:77 - Query time: 14.77 seconds
2025-04-29 06:45:27.441 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(2/4)
2025-04-29 06:45:49.258 | INFO     | swe_log:log_and_print:77 - Query time: 21.30 seconds
2025-04-29 06:45:49.261 | INFO     | swe_log:log_msg:72 - Search block not found in sklearn/feature_extraction/text.py:
    def _check_vocabulary(self):
        """Check if vocabulary is empty or missing (not fit-ed)"""
        msg = "%name)s - Vocabulary wasn't fitted."
        check_is_fitted(self, 'vocabulary_', msg=msg),
2025-04-29 06:45:49.261 | INFO     | swe_log:log_and_print:77 - Error applying patch: Search pattern not found in file., Retrying..
2025-04-29 06:45:57.648 | INFO     | swe_log:log_and_print:77 - Query time: 8.39 seconds
2025-04-29 06:45:57.657 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 06:45:57.658 | INFO     | swe_log:log_msg:72 - Search block not found in sklearn/feature_extraction/text.py:
    def transform(self, raw_documents):
        """Transform documents to document-term matrix.
        """
        ...
2025-04-29 06:45:57.659 | INFO     | swe_log:log_and_print:77 - Error applying patch: Search pattern not found in file., Retrying..
2025-04-29 06:46:03.601 | INFO     | swe_log:log_and_print:77 - Query time: 5.94 seconds
2025-04-29 06:46:03.607 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 06:46:03.608 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py.bak
2025-04-29 06:46:03.608 | INFO     | swe_log:log_msg:72 - Applied 1 edits to sklearn/feature_extraction/text.py
2025-04-29 06:46:03.609 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908 &&                                 source /root/miniforge3/bin/activate scikit-learn__scikit-learn__0.20 && python /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py
2025-04-29 06:46:04.259 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-04-29 06:46:04.260 | INFO     | swe_log:log_msg:72 - 
2025-04-29 06:46:04.260 | INFO     | swe_log:log_msg:72 - STDERR:
2025-04-29 06:46:04.261 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py"
    28: feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    1003: return [t for t, i in sorted(six.iteritems(self.vocabulary_),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/externals/six.py"
    439: return iter(getattr(d, _iteritems)(**kw))
AttributeError: 'list' object has no attribute 'items'
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 28, in main
    feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 1003, in get_feature_names
    return [t for t, i in sorted(six.iteritems(self.vocabulary_),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/externals/six.py", line 439, in iteritems
    return iter(getattr(d, _iteritems)(**kw))
AttributeError: 'list' object has no attribute 'items'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 38, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 35, in main
    assert False, "get_feature_names() raised an exception when it should not have"
AssertionError: get_feature_names() raised an exception when it should not have

2025-04-29 06:46:16.822 | INFO     | swe_log:log_and_print:77 - Query time: 12.53 seconds
2025-04-29 06:46:16.824 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(3/4)
2025-04-29 06:46:19.979 | INFO     | swe_log:log_and_print:77 - Query time: 2.65 seconds
2025-04-29 06:46:19.986 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 06:46:19.986 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py.bak
2025-04-29 06:46:19.987 | INFO     | swe_log:log_msg:72 - Applied 1 edits to sklearn/feature_extraction/text.py
2025-04-29 06:46:19.987 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908 &&                                 source /root/miniforge3/bin/activate scikit-learn__scikit-learn__0.20 && python /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py
2025-04-29 06:46:20.648 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-04-29 06:46:20.649 | INFO     | swe_log:log_msg:72 - 
2025-04-29 06:46:20.649 | INFO     | swe_log:log_msg:72 - STDERR:
2025-04-29 06:46:20.649 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py"
    28: feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    998: self._check_vocabulary()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    305: if self.vocabulary_ is None:
AttributeError: 'CountVectorizer' object has no attribute 'vocabulary_'
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 28, in main
    feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 998, in get_feature_names
    self._check_vocabulary()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 305, in _check_vocabulary
    if self.vocabulary_ is None:
AttributeError: 'CountVectorizer' object has no attribute 'vocabulary_'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 38, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 35, in main
    assert False, "get_feature_names() raised an exception when it should not have"
AssertionError: get_feature_names() raised an exception when it should not have

2025-04-29 06:46:27.800 | INFO     | swe_log:log_and_print:77 - Query time: 7.13 seconds
2025-04-29 06:46:27.802 | INFO     | swe_log:log_and_print:77 - Unable to pass patch LLM review. Retry...(4/4)
2025-04-29 06:46:32.298 | INFO     | swe_log:log_and_print:77 - Query time: 3.65 seconds
2025-04-29 06:46:32.304 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 06:46:32.305 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py.bak
2025-04-29 06:46:32.306 | INFO     | swe_log:log_msg:72 - Applied 1 edits to sklearn/feature_extraction/text.py
2025-04-29 06:46:32.306 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908 &&                                 source /root/miniforge3/bin/activate scikit-learn__scikit-learn__0.20 && python /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py
2025-04-29 06:46:32.959 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-04-29 06:46:32.960 | INFO     | swe_log:log_msg:72 - 
2025-04-29 06:46:32.960 | INFO     | swe_log:log_msg:72 - STDERR:
2025-04-29 06:46:32.960 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py"
    28: feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    1002: return [t for t, i in sorted(six.iteritems(self.vocabulary_),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/externals/six.py"
    439: return iter(getattr(d, _iteritems)(**kw))
AttributeError: 'list' object has no attribute 'items'
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 28, in main
    feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 1002, in get_feature_names
    return [t for t, i in sorted(six.iteritems(self.vocabulary_),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/externals/six.py", line 439, in iteritems
    return iter(getattr(d, _iteritems)(**kw))
AttributeError: 'list' object has no attribute 'items'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 38, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 35, in main
    assert False, "get_feature_names() raised an exception when it should not have"
AssertionError: get_feature_names() raised an exception when it should not have

2025-04-29 06:46:38.028 | INFO     | swe_log:log_and_print:77 - Query time: 5.04 seconds
2025-04-29 06:46:38.031 | INFO     | swe_log:log_and_print:77 - Unable to pass reviewer
2025-04-29 06:46:38.031 | INFO     | swe_log:log_and_print:77 - 
Restart...(1/4
2025-04-29 06:46:45.185 | INFO     | swe_log:log_and_print:77 - Query time: 6.64 seconds
2025-04-29 06:46:45.188 | INFO     | swe_log:log_and_print:77 - deep_dive_debugging depth: 1
2025-04-29 06:46:45.189 | INFO     | swe_log:log_and_print:77 - choose method: sklearn/feature_extraction/text.py:VectorizerMixin._check_vocabulary
2025-04-29 06:46:56.738 | INFO     | swe_log:log_and_print:77 - Query time: 10.17 seconds
2025-04-29 06:46:56.741 | INFO     | swe_log:log_and_print:77 - choose scope: sklearn/feature_extraction/text.py:210-250
2025-04-29 06:47:01.536 | INFO     | swe_log:log_and_print:77 - Query time: 3.42 seconds
2025-04-29 06:47:01.539 | INFO     | swe_log:log_and_print:77 - deep_dive_debugging depth: 2
2025-04-29 06:47:01.540 | INFO     | swe_log:log_and_print:77 - choose method: sklearn/feature_extraction/text.py:CountVectorizer.__init__
2025-04-29 06:47:08.026 | INFO     | swe_log:log_and_print:77 - Query time: 5.11 seconds
2025-04-29 06:47:08.029 | INFO     | swe_log:log_and_print:77 - choose scope: sklearn/feature_extraction/text.py:300-320
2025-04-29 06:47:12.446 | INFO     | swe_log:log_and_print:77 - Query time: 3.06 seconds
2025-04-29 06:47:12.449 | INFO     | swe_log:log_and_print:77 - deep_dive_debugging depth: 3
2025-04-29 06:47:12.450 | INFO     | swe_log:log_and_print:77 - choose method: sklearn/feature_extraction/text.py:VectorizerMixin._validate_vocabulary
2025-04-29 06:47:20.401 | INFO     | swe_log:log_and_print:77 - Query time: 6.57 seconds
2025-04-29 06:47:20.404 | INFO     | swe_log:log_and_print:77 - choose buggy method: sklearn/feature_extraction/text.py:CountVectorizer.__init__
2025-04-29 06:47:20.405 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908 &&                                 source /root/miniforge3/bin/activate scikit-learn__scikit-learn__0.20 && python /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py
2025-04-29 06:47:21.061 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-04-29 06:47:21.062 | INFO     | swe_log:log_msg:72 - 
2025-04-29 06:47:21.062 | INFO     | swe_log:log_msg:72 - STDERR:
2025-04-29 06:47:21.062 | INFO     | swe_log:log_msg:72 - Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py"
    28: feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    996: self._check_vocabulary()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py"
    304: check_is_fitted(self, 'vocabulary_', msg=msg),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/utils/validation.py"
    860: raise NotFittedError(msg % {'name': type(estimator).__name__})
NotFittedError: CountVectorizer - Vocabulary wasn't fitted.
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 28, in main
    feature_names = vectorizer.get_feature_names()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 996, in get_feature_names
    self._check_vocabulary()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py", line 304, in _check_vocabulary
    check_is_fitted(self, 'vocabulary_', msg=msg),
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/utils/validation.py", line 860, in check_is_fitted
    raise NotFittedError(msg % {'name': type(estimator).__name__})
sklearn.exceptions.NotFittedError: CountVectorizer - Vocabulary wasn't fitted.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 38, in <module>
    main()
  File "/data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py", line 35, in main
    assert False, "get_feature_names() raised an exception when it should not have"
AssertionError: get_feature_names() raised an exception when it should not have

2025-04-29 06:47:23.557 | INFO     | swe_log:log_and_print:77 - Query time: 2.47 seconds
2025-04-29 06:47:23.561 | INFO     | swe_log:log_and_print:77 - API call 1/2
2025-04-29 06:47:26.855 | INFO     | swe_log:log_and_print:77 - Query time: 3.29 seconds
2025-04-29 06:47:26.858 | INFO     | swe_log:log_and_print:77 - API call 2/2
2025-04-29 06:47:33.369 | INFO     | swe_log:log_and_print:77 - Query time: 6.51 seconds
2025-04-29 06:47:38.192 | INFO     | swe_log:log_and_print:77 - Query time: 4.80 seconds
2025-04-29 06:47:38.197 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 06:47:38.198 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py.bak
2025-04-29 06:47:38.199 | INFO     | swe_log:log_msg:72 - Applied 1 edits to sklearn/feature_extraction/text.py
2025-04-29 06:47:38.199 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908 &&                                 source /root/miniforge3/bin/activate scikit-learn__scikit-learn__0.20 && python /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/reproduce.py
2025-04-29 06:47:53.929 | INFO     | swe_log:log_and_print:77 - Query time: 15.05 seconds
2025-04-29 06:47:53.931 | INFO     | swe_log:log_and_print:77 - Debugging process completed. Start evaluation
2025-04-29 06:47:54.419 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-04-29 06:47:54.420 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908/sklearn/feature_extraction/text.py.bak
2025-04-29 06:47:54.421 | INFO     | swe_log:log_msg:72 - Applied 1 edits to sklearn/feature_extraction/text.py
2025-04-29 06:47:58.459 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-04-29 06:47:58.460 | INFO     | swe_log:log_msg:72 - ============================= test session starts ==============================
platform linux -- Python 3.6.15, pytest-6.2.5, py-1.11.0, pluggy-1.0.0
rootdir: /data/swe-fl/TMP/testbed/scikit-learn__scikit-learn-10908, configfile: setup.cfg
collected 48 items

sklearn/feature_extraction/tests/test_text.py ........F............F.... [ 54%]
.............F........                                                   [100%]

=================================== FAILURES ===================================
____________________ test_countvectorizer_custom_vocabulary ____________________

    def test_countvectorizer_custom_vocabulary():
        vocab = {"pizza": 0, "beer": 1}
        terms = set(vocab.keys())
    
        # Try a few of the supported types.
        for typ in [dict, list, iter, partial(defaultdict, int)]:
            v = typ(vocab)
            vect = CountVectorizer(vocabulary=v)
>           vect.fit(JUNK_FOOD_DOCS)

sklearn/feature_extraction/tests/test_text.py:253: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
sklearn/feature_extraction/text.py:873: in fit
    self.fit_transform(raw_documents)
sklearn/feature_extraction/text.py:901: in fit_transform
    self._validate_vocabulary()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = CountVectorizer(analyzer='word', binary=False, decode_error='strict',
        dtype=<class 'numpy.int64'>, encoding='u...en_pattern='(?u)\\b\\w\\w+\\b',
        tokenizer=None,
        vocabulary=<dict_keyiterator object at 0x7f8d730c1f48>)

    def _validate_vocabulary(self):
        vocabulary = self.vocabulary
        if vocabulary is not None:
            if isinstance(vocabulary, set):
                vocabulary = sorted(vocabulary)
            if not isinstance(vocabulary, Mapping):
                vocab = {}
                for i, t in enumerate(vocabulary):
                    if vocab.setdefault(t, i) != i:
                        msg = "Duplicate term in vocabulary: %r" % t
                        raise ValueError(msg)
                vocabulary = vocab
            else:
                indices = set(six.itervalues(vocabulary))
                if len(indices) != len(vocabulary):
                    raise ValueError("Vocabulary contains repeated indices.")
                for i in xrange(len(vocabulary)):
                    if i not in indices:
                        msg = ("Vocabulary of size %d doesn't contain index "
                               "%d." % (len(vocabulary), i))
                        raise ValueError(msg)
            if not vocabulary:
>               raise ValueError("empty vocabulary passed to fit")
E               ValueError: empty vocabulary passed to fit

sklearn/feature_extraction/text.py:295: ValueError
______________________________ test_feature_names ______________________________

    def test_feature_names():
        cv = CountVectorizer(max_df=0.5)
    
        # test for Value error on unfitted/empty vocabulary
        assert_raises(ValueError, cv.get_feature_names)
>       assert_false(cv.fixed_vocabulary_)
E       AttributeError: 'CountVectorizer' object has no attribute 'fixed_vocabulary_'

sklearn/feature_extraction/tests/test_text.py:547: AttributeError
____________________________ test_non_unique_vocab _____________________________

    def test_non_unique_vocab():
        vocab = ['a', 'b', 'c', 'a', 'a']
>       vect = CountVectorizer(vocabulary=vocab)

sklearn/feature_extraction/tests/test_text.py:962: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
sklearn/feature_extraction/text.py:740: in __init__
    self._validate_vocabulary()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = CountVectorizer(analyzer='word', binary=None, decode_error='strict',
        dtype=None, encoding='utf-8', input='cont..._accents=None,
        token_pattern='(?u)\\b\\w\\w+\\b', tokenizer=None,
        vocabulary=['a', 'b', 'c', 'a', 'a'])

    def _validate_vocabulary(self):
        vocabulary = self.vocabulary
        if vocabulary is not None:
            if isinstance(vocabulary, set):
                vocabulary = sorted(vocabulary)
            if not isinstance(vocabulary, Mapping):
                vocab = {}
                for i, t in enumerate(vocabulary):
                    if vocab.setdefault(t, i) != i:
                        msg = "Duplicate term in vocabulary: %r" % t
>                       raise ValueError(msg)
E                       ValueError: Duplicate term in vocabulary: 'a'

sklearn/feature_extraction/text.py:283: ValueError
==================================== PASSES ====================================
=========================== short test summary info ============================
PASSED sklearn/feature_extraction/tests/test_text.py::test_strip_accents
PASSED sklearn/feature_extraction/tests/test_text.py::test_to_ascii
PASSED sklearn/feature_extraction/tests/test_text.py::test_word_analyzer_unigrams
PASSED sklearn/feature_extraction/tests/test_text.py::test_word_analyzer_unigrams_and_bigrams
PASSED sklearn/feature_extraction/tests/test_text.py::test_unicode_decode_error
PASSED sklearn/feature_extraction/tests/test_text.py::test_char_ngram_analyzer
PASSED sklearn/feature_extraction/tests/test_text.py::test_char_wb_ngram_analyzer
PASSED sklearn/feature_extraction/tests/test_text.py::test_word_ngram_analyzer
PASSED sklearn/feature_extraction/tests/test_text.py::test_countvectorizer_custom_vocabulary_pipeline
PASSED sklearn/feature_extraction/tests/test_text.py::test_countvectorizer_custom_vocabulary_repeated_indices
PASSED sklearn/feature_extraction/tests/test_text.py::test_countvectorizer_custom_vocabulary_gap_index
PASSED sklearn/feature_extraction/tests/test_text.py::test_countvectorizer_stop_words
PASSED sklearn/feature_extraction/tests/test_text.py::test_countvectorizer_empty_vocabulary
PASSED sklearn/feature_extraction/tests/test_text.py::test_fit_countvectorizer_twice
PASSED sklearn/feature_extraction/tests/test_text.py::test_tf_idf_smoothing
PASSED sklearn/feature_extraction/tests/test_text.py::test_tfidf_no_smoothing
PASSED sklearn/feature_extraction/tests/test_text.py::test_sublinear_tf
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer
PASSED sklearn/feature_extraction/tests/test_text.py::test_tfidf_vectorizer_setters
PASSED sklearn/feature_extraction/tests/test_text.py::test_hashing_vectorizer
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer_max_features
PASSED sklearn/feature_extraction/tests/test_text.py::test_count_vectorizer_max_features
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer_max_df
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer_min_df
PASSED sklearn/feature_extraction/tests/test_text.py::test_count_binary_occurrences
PASSED sklearn/feature_extraction/tests/test_text.py::test_hashed_binary_occurrences
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer_inverse_transform
PASSED sklearn/feature_extraction/tests/test_text.py::test_count_vectorizer_pipeline_grid_selection
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer_pipeline_grid_selection
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer_pipeline_cross_validation
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer_unicode
PASSED sklearn/feature_extraction/tests/test_text.py::test_tfidf_vectorizer_with_fixed_vocabulary
PASSED sklearn/feature_extraction/tests/test_text.py::test_pickling_vectorizer
PASSED sklearn/feature_extraction/tests/test_text.py::test_countvectorizer_vocab_sets_when_pickling
PASSED sklearn/feature_extraction/tests/test_text.py::test_countvectorizer_vocab_dicts_when_pickling
PASSED sklearn/feature_extraction/tests/test_text.py::test_stop_words_removal
PASSED sklearn/feature_extraction/tests/test_text.py::test_pickling_transformer
PASSED sklearn/feature_extraction/tests/test_text.py::test_hashingvectorizer_nan_in_docs
PASSED sklearn/feature_extraction/tests/test_text.py::test_tfidfvectorizer_binary
PASSED sklearn/feature_extraction/tests/test_text.py::test_tfidfvectorizer_export_idf
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer_vocab_clone
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizer_string_object_as_input
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizers_invalid_ngram_range[vec0]
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizers_invalid_ngram_range[vec1]
PASSED sklearn/feature_extraction/tests/test_text.py::test_vectorizers_invalid_ngram_range[vec2]
FAILED sklearn/feature_extraction/tests/test_text.py::test_countvectorizer_custom_vocabulary
FAILED sklearn/feature_extraction/tests/test_text.py::test_feature_names - At...
FAILED sklearn/feature_extraction/tests/test_text.py::test_non_unique_vocab
=================== 3 failed, 45 passed, 4 warnings in 2.99s ===================


2025-04-29 06:47:58.461 | INFO     | swe_log:log_msg:72 - STDERR:
2025-04-29 06:47:58.461 | INFO     | swe_log:log_msg:72 - ERROR conda.cli.main_run:execute(125): `conda run pytest -rA sklearn/feature_extraction/tests/test_text.py` failed. (See above for error)

