### django/db/migrations/loader.py
<<<<<<< SEARCH
                # The replacing migration is only marked as applied if all of
                # its replacement targets are.
                if all(applied_statuses):
                    self.applied_migrations[key] = migration
                else:
                    self.applied_migrations.pop(key, None)
=======
                # The replacing migration should be unapplied if any of
                # its replacement targets are unapplied.
                if not all(applied_statuses):
                    self.applied_migrations.pop(key, None)
                else:
                    self.applied_migrations[key] = migration
>>>>>>> REPLACE
