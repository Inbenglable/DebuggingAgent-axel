To fix the issue, I need to investigate the `_pytest.capture.EncodedFile` class and its `write` method to determine how `mode` is being set or reported. I will search for the class `EncodedFile` within the `_pytest.capture` module and retrieve the `write` method code.

```python
search_class_in_codebase("_pytest.capture.EncodedFile")
search_method_in_codebase("EncodedFile.write")
```
