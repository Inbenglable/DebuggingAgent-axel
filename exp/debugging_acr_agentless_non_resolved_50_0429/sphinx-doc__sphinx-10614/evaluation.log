py39: commands[0]> python -X dev -X warn_default_encoding -m pytest -rA --durations 25 tests/roots/test-ext-inheritance_diagram/conf.py tests/roots/test-ext-inheritance_diagram/index.rst tests/roots/test-ext-inheritance_diagram/subdir/index.rst tests/roots/test-ext-inheritance_diagram/subdir/other.py tests/roots/test-ext-inheritance_diagram/test.py tests/test_ext_inheritance_diagram.py
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.9.21, pytest-8.3.4, pluggy-1.5.0
cachedir: .tox/py39/.pytest_cache
libraries: Sphinx-7.2.0+/ac2b7599d, docutils-0.20.1
base tmp_path: /tmp/pytest-of-root/pytest-359
rootdir: /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-10614
configfile: pyproject.toml
collected 6 items

tests/test_ext_inheritance_diagram.py [32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[31m                             [100%][0m

=================================== FAILURES ===================================
[31m[1m______________________ test_inheritance_diagram_svg_html _______________________[0m

tmp_path = PosixPath('/tmp/pytest-of-root/pytest-359/test_inheritance_diagram_svg_h0')
app = <SphinxTestApp buildername='html'>

    [0m[37m@pytest[39;49;00m.mark.sphinx([33m'[39;49;00m[33mhtml[39;49;00m[33m'[39;49;00m, testroot=[33m'[39;49;00m[33mext-inheritance_diagram[39;49;00m[33m'[39;49;00m,[90m[39;49;00m
                        confoverrides={[33m'[39;49;00m[33mgraphviz_output_format[39;49;00m[33m'[39;49;00m: [33m'[39;49;00m[33msvg[39;49;00m[33m'[39;49;00m})[90m[39;49;00m
    [37m@pytest[39;49;00m.mark.usefixtures([33m'[39;49;00m[33mif_graphviz_found[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_inheritance_diagram_svg_html[39;49;00m(tmp_path, app):[90m[39;49;00m
        inv_file = tmp_path / [33m'[39;49;00m[33minventory[39;49;00m[33m'[39;49;00m[90m[39;49;00m
        inv_file.write_bytes(subdir_inventory)[90m[39;49;00m
        app.config.intersphinx_mapping = {[90m[39;49;00m
            [33m"[39;49;00m[33msubdir[39;49;00m[33m"[39;49;00m: ([33m'[39;49;00m[33mhttps://example.org[39;49;00m[33m'[39;49;00m, [96mstr[39;49;00m(inv_file)),[90m[39;49;00m
        }[90m[39;49;00m
        app.config.intersphinx_cache_limit = [94m0[39;49;00m[90m[39;49;00m
        normalize_intersphinx_mapping(app, app.config)[90m[39;49;00m
        load_mappings(app)[90m[39;49;00m
    [90m[39;49;00m
        app.builder.build_all()[90m[39;49;00m
    [90m[39;49;00m
        content = (app.outdir / [33m'[39;49;00m[33mindex.html[39;49;00m[33m'[39;49;00m).read_text(encoding=[33m'[39;49;00m[33mutf8[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
        base_svgs = re.findall([33m'[39;49;00m[33m<object data=[39;49;00m[33m"[39;49;00m[33m(_images/inheritance-[39;49;00m[33m\\[39;49;00m[33mw+.svg?)[39;49;00m[33m"[39;49;00m[33m'[39;49;00m, content)[90m[39;49;00m
    [90m[39;49;00m
        pattern = ([33m'[39;49;00m[33m<figure class=[39;49;00m[33m"[39;49;00m[33malign-default[39;49;00m[33m"[39;49;00m[33m id=[39;49;00m[33m"[39;49;00m[33mid1[39;49;00m[33m"[39;49;00m[33m>[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m[90m[39;49;00m
                   [33m'[39;49;00m[33m<div class=[39;49;00m[33m"[39;49;00m[33mgraphviz[39;49;00m[33m"[39;49;00m[33m>[39;49;00m[33m'[39;49;00m[90m[39;49;00m
                   [33m'[39;49;00m[33m<object data=[39;49;00m[33m"[39;49;00m[33m_images/inheritance-[39;49;00m[33m\\[39;49;00m[33mw+.svg[39;49;00m[33m"[39;49;00m[33m [39;49;00m[33m'[39;49;00m[90m[39;49;00m
                   [33m'[39;49;00m[33mtype=[39;49;00m[33m"[39;49;00m[33mimage/svg[39;49;00m[33m\\[39;49;00m[33m+xml[39;49;00m[33m"[39;49;00m[33m class=[39;49;00m[33m"[39;49;00m[33minheritance graphviz[39;49;00m[33m"[39;49;00m[33m>[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m[90m[39;49;00m
                   [33m'[39;49;00m[33m<p class=[39;49;00m[33m\"[39;49;00m[33mwarning[39;49;00m[33m\"[39;49;00m[33m>Inheritance diagram of test.Foo</p>[39;49;00m[33m'[39;49;00m[90m[39;49;00m
                   [33m'[39;49;00m[33m</object></div>[39;49;00m[33m\n[39;49;00m[33m<figcaption>[39;49;00m[33m\n[39;49;00m[33m<p><span class=[39;49;00m[33m"[39;49;00m[33mcaption-text[39;49;00m[33m"[39;49;00m[33m>[39;49;00m[33m'[39;49;00m[90m[39;49;00m
                   [33m'[39;49;00m[33mTest Foo!</span><a class=[39;49;00m[33m"[39;49;00m[33mheaderlink[39;49;00m[33m"[39;49;00m[33m href=[39;49;00m[33m"[39;49;00m[33m#id1[39;49;00m[33m"[39;49;00m[33m [39;49;00m[33m'[39;49;00m[90m[39;49;00m
                   [33m'[39;49;00m[33mtitle=[39;49;00m[33m"[39;49;00m[33mPermalink to this image[39;49;00m[33m"[39;49;00m[33m>[39;49;00m[33m\xb6[39;49;00m[33m</a></p>[39;49;00m[33m\n[39;49;00m[33m</figcaption>[39;49;00m[33m\n[39;49;00m[33m</figure>[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
        [94massert[39;49;00m re.search(pattern, content, re.M)[90m[39;49;00m
    [90m[39;49;00m
        subdir_content = (app.outdir / [33m'[39;49;00m[33msubdir/index.html[39;49;00m[33m'[39;49;00m).read_text(encoding=[33m'[39;49;00m[33mutf8[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
        subdir_svgs = re.findall([33m'[39;49;00m[33m<object data=[39;49;00m[33m"[39;49;00m[33m../(_images/inheritance-[39;49;00m[33m\\[39;49;00m[33mw+.svg?)[39;49;00m[33m"[39;49;00m[33m'[39;49;00m, subdir_content)[90m[39;49;00m
    [90m[39;49;00m
        [90m# Go through every SVG inheritance diagram[39;49;00m[90m[39;49;00m
        [94mfor[39;49;00m diagram [95min[39;49;00m base_svgs + subdir_svgs:[90m[39;49;00m
            diagram_content = (app.outdir / diagram).read_text(encoding=[33m'[39;49;00m[33mutf8[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
            [90m# Verify that an intersphinx link was created via the external inventory[39;49;00m[90m[39;49;00m
            [94mif[39;49;00m [33m'[39;49;00m[33msubdir.[39;49;00m[33m'[39;49;00m [95min[39;49;00m diagram_content:[90m[39;49;00m
>               [94massert[39;49;00m [33m"[39;49;00m[33mhttps://example.org[39;49;00m[33m"[39;49;00m [95min[39;49;00m diagram_content[90m[39;49;00m
[1m[31mE               assert 'https://example.org' in '<ns0:svg xmlns:ns0="http://www.w3.org/2000/svg" xmlns:ns1="http://www.w3.org/1999/xlink" width="201pt" height="27pt" ...black" stroke-width="0.5" points="92.74,-11.25 97.74,-9.5 92.74,-7.75 92.74,-11.25" />\n</ns0:g>\n</ns0:g>\n</ns0:svg>'[0m

[1m[31mtests/test_ext_inheritance_diagram.py[0m:235: AssertionError
--------------------------- Captured stdout teardown ---------------------------
# testroot: root
# builder: html
# srcdir: /tmp/pytest-of-root/pytest-359/ext-inheritance_diagram
# outdir: /tmp/pytest-of-root/pytest-359/ext-inheritance_diagram/_build/html
# status: 
[01mRunning Sphinx v7.2.0+/ac2b7599d[39;49;00m
[01mloading pickled environment... [39;49;00mdone
loading intersphinx inventory from /tmp/pytest-of-root/pytest-359/test_inheritance_diagram_svg_h0/inventory...
[01mbuilding [mo]: [39;49;00mall of 0 po files
[01mwriting output... [39;49;00m
[01mbuilding [html]: [39;49;00mall source files
[01mupdating environment: [39;49;00m[config changed ('intersphinx_mapping')] 2 added, 0 changed, 0 removed
[2K[01mreading sources... [39;49;00m[ 50%] [35mindex[39;49;00m
[2K[01mreading sources... [39;49;00m[100%] [35msubdir/index[39;49;00m
[01mlooking for now-outdated files... [39;49;00mnone found
[01mpickling environment... [39;49;00mdone
[01mchecking consistency... [39;49;00mdone
[01mpreparing documents... [39;49;00mdone
[01mcopying assets... [39;49;00m[01mcopying static files... [39;49;00mdone
[01mcopying extra files... [39;49;00mdone
done
[2K[01mwriting output... [39;49;00m[ 50%] [32mindex[39;49;00m
[2K[01mwriting output... [39;49;00m[100%] [32msubdir/index[39;49;00m
[01mgenerating indices... [39;49;00mgenindex done
[01mwriting additional pages... [39;49;00msearch done
[01mdumping search index in English (code: en)... [39;49;00mdone
[01mdumping object inventory... [39;49;00mdone

# warning: 
[91m/tmp/pytest-of-root/pytest-359/ext-inheritance_diagram/subdir/index.rst: WARNING: document isn't included in any toctree[39;49;00m

==================================== PASSES ====================================
--------------------------- Captured stdout teardown ---------------------------
# testroot: root
# builder: html
# srcdir: /tmp/pytest-of-root/pytest-359/inheritance
# outdir: /tmp/pytest-of-root/pytest-359/inheritance/_build/html
# status: 
[01mRunning Sphinx v7.2.0+/ac2b7599d[39;49;00m
[01mbuilding [mo]: [39;49;00mall of 0 po files
[01mwriting output... [39;49;00m
[01mbuilding [html]: [39;49;00mall source files
[01mupdating environment: [39;49;00m[new config] 7 added, 0 changed, 0 removed
[2K[01mreading sources... [39;49;00m[ 14%] [35mbasic_diagram[39;49;00m
[2K[01mreading sources... [39;49;00m[ 29%] [35mdiagram_module_w_2_top_classes[39;49;00m
[2K[01mreading sources... [39;49;00m[ 43%] [35mdiagram_w_1_top_class[39;49;00m
[2K[01mreading sources... [39;49;00m[ 57%] [35mdiagram_w_2_top_classes[39;49;00m
[2K[01mreading sources... [39;49;00m[ 71%] [35mdiagram_w_nested_classes[39;49;00m
[2K[01mreading sources... [39;49;00m[ 86%] [35mdiagram_w_parts[39;49;00m
[2K[01mreading sources... [39;49;00m[100%] [35mindex[39;49;00m
[01mlooking for now-outdated files... [39;49;00mnone found
[01mpickling environment... [39;49;00mdone
[01mchecking consistency... [39;49;00mdone
[01mpreparing documents... [39;49;00mdone
[01mcopying assets... [39;49;00m[01mcopying static files... [39;49;00mdone
[01mcopying extra files... [39;49;00mdone
done
[2K[01mwriting output... [39;49;00m[ 14%] [32mbasic_diagram[39;49;00m
[2K[01mwriting output... [39;49;00m[ 29%] [32mdiagram_module_w_2_top_classes[39;49;00m
[2K[01mwriting output... [39;49;00m[ 43%] [32mdiagram_w_1_top_class[39;49;00m
[2K[01mwriting output... [39;49;00m[ 57%] [32mdiagram_w_2_top_classes[39;49;00m
[2K[01mwriting output... [39;49;00m[ 71%] [32mdiagram_w_nested_classes[39;49;00m
[2K[01mwriting output... [39;49;00m[ 86%] [32mdiagram_w_parts[39;49;00m
[2K[01mwriting output... [39;49;00m[100%] [32mindex[39;49;00m
[01mgenerating indices... [39;49;00mgenindex done
[01mwriting additional pages... [39;49;00msearch done
[01mdumping search index in English (code: en)... [39;49;00mdone
[01mdumping object inventory... [39;49;00mdone

# warning: 

--------------------------- Captured stdout teardown ---------------------------
# testroot: root
# builder: html
# srcdir: /tmp/pytest-of-root/pytest-359/ext-inheritance_diagram
# outdir: /tmp/pytest-of-root/pytest-359/ext-inheritance_diagram/_build/html
# status: 
[01mRunning Sphinx v7.2.0+/ac2b7599d[39;49;00m
loading intersphinx inventory from /tmp/pytest-of-root/pytest-359/test_inheritance_diagram_png_h0/inventory...
[01mbuilding [mo]: [39;49;00mall of 0 po files
[01mwriting output... [39;49;00m
[01mbuilding [html]: [39;49;00mall source files
[01mupdating environment: [39;49;00m[new config] 2 added, 0 changed, 0 removed
[2K[01mreading sources... [39;49;00m[ 50%] [35mindex[39;49;00m
[2K[01mreading sources... [39;49;00m[100%] [35msubdir/index[39;49;00m
[01mlooking for now-outdated files... [39;49;00mnone found
[01mpickling environment... [39;49;00mdone
[01mchecking consistency... [39;49;00mdone
[01mpreparing documents... [39;49;00mdone
[01mcopying assets... [39;49;00m[01mcopying static files... [39;49;00mdone
[01mcopying extra files... [39;49;00mdone
done
[2K[01mwriting output... [39;49;00m[ 50%] [32mindex[39;49;00m
[2K[01mwriting output... [39;49;00m[100%] [32msubdir/index[39;49;00m
[01mgenerating indices... [39;49;00mgenindex done
[01mwriting additional pages... [39;49;00msearch done
[01mdumping search index in English (code: en)... [39;49;00mdone
[01mdumping object inventory... [39;49;00mdone

# warning: 
[91mWARNING: The pre-Sphinx 1.0 'intersphinx_mapping' format is deprecated and will be removed in Sphinx 8. Update to the current format as described in the documentation. Hint: "intersphinx_mapping = {'<name>': ('https://example.org', '/tmp/pytest-of-root/pytest-359/test_inheritance_diagram_png_h0/inventory')}".https://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html#confval-intersphinx_mapping[39;49;00m
[91m/tmp/pytest-of-root/pytest-359/ext-inheritance_diagram/subdir/index.rst: WARNING: document isn't included in any toctree[39;49;00m

--------------------------- Captured stdout teardown ---------------------------
# testroot: root
# builder: latex
# srcdir: /tmp/pytest-of-root/pytest-359/ext-inheritance_diagram
# outdir: /tmp/pytest-of-root/pytest-359/ext-inheritance_diagram/_build/latex
# status: 
[01mRunning Sphinx v7.2.0+/ac2b7599d[39;49;00m
[01mloading pickled environment... [39;49;00mdone
[01mbuilding [mo]: [39;49;00mall of 0 po files
[01mwriting output... [39;49;00m
[01mbuilding [latex]: [39;49;00mall source files
[01mupdating environment: [39;49;00m[config changed ('intersphinx_mapping')] 2 added, 0 changed, 0 removed
[2K[01mreading sources... [39;49;00m[ 50%] [35mindex[39;49;00m
[2K[01mreading sources... [39;49;00m[100%] [35msubdir/index[39;49;00m
[01mlooking for now-outdated files... [39;49;00mnone found
[01mpickling environment... [39;49;00mdone
[01mchecking consistency... [39;49;00mdone
[01mcopying TeX support files... [39;49;00m[01mcopying TeX support files...[39;49;00m
done
[01mprocessing python.tex... [39;49;00m[32mindex[39;49;00m 
resolving references...
done
[01mwriting... [39;49;00mdone

# warning: 
[91m/tmp/pytest-of-root/pytest-359/ext-inheritance_diagram/subdir/index.rst: WARNING: document isn't included in any toctree[39;49;00m

--------------------------- Captured stdout teardown ---------------------------
# testroot: root
# builder: html
# srcdir: /tmp/pytest-of-root/pytest-359/ext-inheritance_diagram-alias
# outdir: /tmp/pytest-of-root/pytest-359/ext-inheritance_diagram-alias/_build/html
# status: 
[01mRunning Sphinx v7.2.0+/ac2b7599d[39;49;00m
[01mbuilding [mo]: [39;49;00mall of 0 po files
[01mwriting output... [39;49;00m
[01mbuilding [html]: [39;49;00mall source files
[01mupdating environment: [39;49;00m[new config] 2 added, 0 changed, 0 removed
[2K[01mreading sources... [39;49;00m[ 50%] [35mindex[39;49;00m
[2K[01mreading sources... [39;49;00m[100%] [35msubdir/index[39;49;00m
[01mlooking for now-outdated files... [39;49;00mnone found
[01mpickling environment... [39;49;00mdone
[01mchecking consistency... [39;49;00mdone
[01mpreparing documents... [39;49;00mdone
[01mcopying assets... [39;49;00m[01mcopying static files... [39;49;00mdone
[01mcopying extra files... [39;49;00mdone
done
[2K[01mwriting output... [39;49;00m[ 50%] [32mindex[39;49;00m
[2K[01mwriting output... [39;49;00m[100%] [32msubdir/index[39;49;00m
[01mgenerating indices... [39;49;00mgenindex done
[01mwriting additional pages... [39;49;00msearch done
[01mdumping search index in English (code: en)... [39;49;00mdone
[01mdumping object inventory... [39;49;00mdone

# warning: 
[91m/tmp/pytest-of-root/pytest-359/ext-inheritance_diagram-alias/subdir/index.rst: WARNING: document isn't included in any toctree[39;49;00m

============================= slowest 25 durations =============================
0.52s call     tests/test_ext_inheritance_diagram.py::test_inheritance_diagram
0.32s call     tests/test_ext_inheritance_diagram.py::test_inheritance_diagram_latex_alias
0.31s call     tests/test_ext_inheritance_diagram.py::test_inheritance_diagram_svg_html
0.31s call     tests/test_ext_inheritance_diagram.py::test_inheritance_diagram_png_html
0.16s call     tests/test_ext_inheritance_diagram.py::test_inheritance_diagram_latex
0.11s setup    tests/test_ext_inheritance_diagram.py::test_inheritance_diagram
0.10s setup    tests/test_ext_inheritance_diagram.py::test_inheritance_diagram_latex
0.04s setup    tests/test_ext_inheritance_diagram.py::test_inheritance_diagram_png_html
0.04s setup    tests/test_ext_inheritance_diagram.py::test_inheritance_diagram_latex_alias
0.04s setup    tests/test_ext_inheritance_diagram.py::test_inheritance_diagram_svg_html

(8 durations < 0.005s hidden.  Use -vv to show these durations.)
[36m[1m=========================== short test summary info ============================[0m
[32mPASSED[0m tests/test_ext_inheritance_diagram.py::[1mtest_inheritance_diagram[0m
[32mPASSED[0m tests/test_ext_inheritance_diagram.py::[1mtest_inheritance_diagram_png_html[0m
[32mPASSED[0m tests/test_ext_inheritance_diagram.py::[1mtest_inheritance_diagram_latex[0m
[32mPASSED[0m tests/test_ext_inheritance_diagram.py::[1mtest_inheritance_diagram_latex_alias[0m
[32mPASSED[0m tests/test_ext_inheritance_diagram.py::[1mtest_import_classes[0m
[31mFAILED[0m tests/test_ext_inheritance_diagram.py::[1mtest_inheritance_diagram_svg_html[0m - assert 'https://example.org' in '<ns0:svg xmlns:ns0="http://www.w3.org/2000...
[31m========================= [31m[1m1 failed[0m, [32m5 passed[0m[31m in 2.34s[0m[31m ==========================[0m
py39: exit 1 (2.99 seconds) /data/swe-fl/TMP/testbed/sphinx-doc__sphinx-10614> python -X dev -X warn_default_encoding -m pytest -rA --durations 25 tests/roots/test-ext-inheritance_diagram/conf.py tests/roots/test-ext-inheritance_diagram/index.rst tests/roots/test-ext-inheritance_diagram/subdir/index.rst tests/roots/test-ext-inheritance_diagram/subdir/other.py tests/roots/test-ext-inheritance_diagram/test.py tests/test_ext_inheritance_diagram.py pid=819249
  py39: FAIL code 1 (3.03=setup[0.04]+cmd[2.99] seconds)
  evaluation failed :( (3.20 seconds)

ERROR conda.cli.main_run:execute(125): `conda run tox --current-env -epy39 -v -- tests/roots/test-ext-inheritance_diagram/conf.py tests/roots/test-ext-inheritance_diagram/index.rst tests/roots/test-ext-inheritance_diagram/subdir/index.rst tests/roots/test-ext-inheritance_diagram/subdir/other.py tests/roots/test-ext-inheritance_diagram/test.py tests/test_ext_inheritance_diagram.py` failed. (See above for error)
