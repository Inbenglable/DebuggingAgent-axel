### sympy/combinatorics/homomorphisms.py
<<<<<<< SEARCH
                elif s**-1 in images:
=======
                elif isinstance(domain, PermutationGroup) and s not in gens and s**-1 in images:
>>>>>>> REPLACE

### sympy/combinatorics/homomorphisms.py
<<<<<<< SEARCH
                if isinstance(domain, PermutationGroup) and r[i] in gens:
=======
                if isinstance(domain, PermutationGroup):
                    if r[i] in gens:
                        s = domain.generators[gens.index(r[i])]
                    elif r[i]**-1 in gens:
                        s = domain.generators[gens.index(r[i]**-1)]**-1
                    else:
                        s = r[i]
>>>>>>> REPLACE
