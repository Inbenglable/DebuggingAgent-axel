2025-05-02 18:29:14.586 | INFO     | swe_log:log_and_print:77 - ['test_accent (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'test_basic (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'test_column (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'test_nopass (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'SIGINT is ignored in Python and passed to psql to abort quries.']
2025-05-02 18:29:14.608 | INFO     | swe_log:log_and_print:77 - python -m pip install -e .
2025-05-02 18:29:14.609 | INFO     | swe_log:log_and_print:77 - ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 dbshell.test_postgresql
2025-05-02 18:29:14.609 | INFO     | swe_log:log_and_print:77 - /data/swe-fl/TMP/testbed/django__django-10973
2025-05-02 18:29:14.847 | INFO     | swe_log:log_msg:72 - Remove exist testbed_path: /data/swe-fl/TMP/testbed/django__django-10973
2025-05-02 18:29:19.438 | INFO     | swe_log:log_and_print:77 - Setup testbed environment: django__django-10973
2025-05-02 18:29:19.438 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/django__django-10973 && source /root/miniforge3/bin/activate django__django__3.0            && cd /data/swe-fl/SRC/pysnooper_axel/dbgsnooper && python -m pip install -e . && cd /data/swe-fl/TMP/testbed/django__django-10973           && python -m pip install -e . && echo SUCCESS
2025-05-02 18:29:22.488 | INFO     | swe_log:log_msg:72 - Setup testbed: Done
2025-05-02 18:29:28.188 | INFO     | swe_log:log_and_print:77 - Query time: 2.35 seconds
2025-05-02 18:29:36.835 | INFO     | swe_log:log_and_print:77 - Query time: 3.37 seconds
2025-05-02 18:29:36.836 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(1/5)
2025-05-02 18:29:39.846 | INFO     | swe_log:log_and_print:77 - Query time: 3.01 seconds
2025-05-02 18:29:39.847 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid filter reply results found.
Retrying..(2/5)
2025-05-02 18:29:45.533 | INFO     | swe_log:log_and_print:77 - Query time: 5.69 seconds
2025-05-02 18:29:45.535 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid filter reply results found.
Retrying..(3/5)
2025-05-02 18:29:51.658 | INFO     | swe_log:log_and_print:77 - Query time: 6.12 seconds
2025-05-02 18:29:51.659 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(4/5)
2025-05-02 18:29:55.666 | INFO     | swe_log:log_and_print:77 - Query time: 4.01 seconds
2025-05-02 18:29:55.667 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid filter reply results found.
Retrying..(5/5)
2025-05-02 18:29:55.668 | INFO     | swe_log:log_and_print:77 - Failed to get valid model response after multiple attempts.
2025-05-02 18:29:55.668 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_codebase("Client"). Error: Failed to get valid model response after multiple attempts.
2025-05-02 18:29:58.318 | INFO     | swe_log:log_and_print:77 - Query time: 2.50 seconds
2025-05-02 18:29:58.319 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(1/5)
2025-05-02 18:30:00.555 | INFO     | swe_log:log_and_print:77 - Query time: 2.24 seconds
2025-05-02 18:30:00.556 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(2/5)
2025-05-02 18:30:04.051 | INFO     | swe_log:log_and_print:77 - Query time: 3.49 seconds
2025-05-02 18:30:04.052 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("run"). Error: No valid filter reply results found.
2025-05-02 18:30:04.053 | INFO     | swe_log:log_and_print:77 - Whole Process crushed: No valid API call result.
2025-05-02 18:30:04.053 | INFO     | swe_log:log_and_print:77 - 
Restart...(1/4
2025-05-02 18:30:07.461 | INFO     | swe_log:log_and_print:77 - Query time: 2.26 seconds
2025-05-02 18:30:07.772 | INFO     | swe_log:log_and_print:77 - API call 1/4
2025-05-02 18:30:09.616 | INFO     | swe_log:log_and_print:77 - Query time: 1.84 seconds
2025-05-02 18:30:10.054 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("postgresql"). Error: No matching method found for: postgresql in directory: /data/swe-fl/TMP/testbed/django__django-10973
2025-05-02 18:30:13.757 | INFO     | swe_log:log_and_print:77 - Query time: 3.55 seconds
2025-05-02 18:30:13.758 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(1/5)
2025-05-02 18:30:16.511 | INFO     | swe_log:log_and_print:77 - Query time: 2.75 seconds
2025-05-02 18:30:16.513 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid filter reply results found.
Retrying..(2/5)
2025-05-02 18:30:19.280 | INFO     | swe_log:log_and_print:77 - Query time: 2.77 seconds
2025-05-02 18:30:19.281 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(3/5)
2025-05-02 18:30:22.124 | INFO     | swe_log:log_and_print:77 - Query time: 2.84 seconds
2025-05-02 18:30:22.125 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(4/5)
2025-05-02 18:30:24.727 | INFO     | swe_log:log_and_print:77 - Query time: 2.60 seconds
2025-05-02 18:30:24.728 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No Python code block found in the response.
Retrying..(5/5)
2025-05-02 18:30:24.729 | INFO     | swe_log:log_and_print:77 - Failed to get valid model response after multiple attempts.
2025-05-02 18:30:24.729 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("run"). Error: Failed to get valid model response after multiple attempts.
2025-05-02 18:30:24.730 | INFO     | swe_log:log_and_print:77 - Whole Process crushed: No valid API call result.
2025-05-02 18:30:24.730 | INFO     | swe_log:log_and_print:77 - 
Restart...(2/4
2025-05-02 18:30:27.763 | INFO     | swe_log:log_and_print:77 - Query time: 1.91 seconds
2025-05-02 18:30:28.367 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_codebase("PostgreSQLDatabaseWrapper"). Error: No matching class found for: PostgreSQLDatabaseWrapper in directory: /data/swe-fl/TMP/testbed/django__django-10973
2025-05-02 18:30:28.368 | INFO     | swe_log:log_and_print:77 - API call 1/4
2025-05-02 18:30:30.211 | INFO     | swe_log:log_and_print:77 - Query time: 1.84 seconds
2025-05-02 18:30:30.502 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(1/5)
2025-05-02 18:30:31.938 | INFO     | swe_log:log_and_print:77 - Query time: 1.44 seconds
2025-05-02 18:30:32.236 | INFO     | swe_log:log_and_print:77 - API call 2/4
2025-05-02 18:30:33.978 | INFO     | swe_log:log_and_print:77 - Query time: 1.74 seconds
2025-05-02 18:30:37.519 | INFO     | swe_log:log_and_print:77 - Query time: 3.10 seconds
2025-05-02 18:30:37.521 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_codebase("PostgreSQLDatabaseWrapper.client"). Error: No valid filter reply results found.
2025-05-02 18:30:41.476 | INFO     | swe_log:log_and_print:77 - Query time: 3.81 seconds
2025-05-02 18:30:41.478 | INFO     | swe_log:log_and_print:77 - API call 3/4
2025-05-02 18:30:43.421 | INFO     | swe_log:log_and_print:77 - Query time: 1.94 seconds
2025-05-02 18:30:43.425 | INFO     | swe_log:log_and_print:77 - API call 4/4
2025-05-02 18:30:44.164 | INFO     | swe_log:log_and_print:77 - Query time: 0.74 seconds
2025-05-02 18:30:50.070 | INFO     | swe_log:log_and_print:77 - Query time: 5.88 seconds
2025-05-02 18:30:50.072 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-02 18:30:50.073 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/django__django-10973/django/db/backends/postgresql/client.py.bak
2025-05-02 18:30:50.074 | INFO     | swe_log:log_msg:72 - Applied 1 edits to django/db/backends/postgresql/client.py
2025-05-02 18:30:50.075 | INFO     | swe_log:log_and_print:77 - Debugging process completed. Start evaluation
2025-05-02 18:30:51.182 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-02 18:30:51.183 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/django__django-10973/django/db/backends/postgresql/client.py.bak
2025-05-02 18:30:51.183 | INFO     | swe_log:log_msg:72 - Applied 1 edits to django/db/backends/postgresql/client.py
2025-05-02 18:30:52.603 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-02 18:30:52.604 | INFO     | swe_log:log_msg:72 - Testing against Django installed in '/data/swe-fl/TMP/testbed/django__django-10973/django'
Importing application dbshell
Skipping setup of unused database(s): default, other.
System check identified no issues (0 silenced).


2025-05-02 18:30:52.604 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-02 18:30:52.604 | INFO     | swe_log:log_msg:72 - test_accent (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ok
test_basic (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ok
test_column (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ok
test_nopass (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ok
test_sigint_handler (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
SIGINT is ignored in Python and passed to psql to abort quries. ... FAIL

======================================================================
FAIL: test_sigint_handler (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
SIGINT is ignored in Python and passed to psql to abort quries.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/django__django-10973/tests/dbshell/test_postgresql.py", line 94, in test_sigint_handler
    DatabaseClient.runshell_db({})
  File "/data/swe-fl/TMP/testbed/django__django-10973/django/db/backends/postgresql/client.py", line 40, in runshell_db
    subprocess.run(args, env=env, check=True)
  File "/data/swe-fl/TMP/testbed/django__django-10973/tests/dbshell/test_postgresql.py", line 88, in _mock_subprocess_run
    self.assertEqual(handler, signal.SIG_IGN)
AssertionError: <unittest.signals._InterruptHandler object at 0x7fc3423f4630> != <Handlers.SIG_IGN: 1>

----------------------------------------------------------------------
Ran 5 tests in 0.001s

FAILED (failures=1)

ERROR conda.cli.main_run:execute(125): `conda run ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 dbshell.test_postgresql` failed. (See above for error)

