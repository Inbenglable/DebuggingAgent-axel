### sympy/combinatorics/homomorphisms.py
<<<<<<< SEARCH
            if isinstance(domain, PermutationGroup) and r[i] in gens:
                s = domain.generators[gens.index(r[i])]
            else:
                s = r[i]
            if s in images:
                w = w*images[s]**power
            elif s**-1 in images:
                w = w*images[s**-1]**power
=======
            # Simplified handling of generators and their inverses
            s = r[i]
            inverse = s**-1
            if s in images:
                w = w * images[s]**power
            elif inverse in images:
                w = w * images[inverse]**-power
>>>>>>> REPLACE
