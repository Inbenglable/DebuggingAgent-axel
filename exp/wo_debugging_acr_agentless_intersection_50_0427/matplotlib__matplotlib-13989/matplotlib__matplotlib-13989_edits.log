### lib/matplotlib/axes/_axes.py
<<<<<<< SEARCH
        if density and not stacked:
            hist_kwargs = dict(density=density)
=======
        if density:
            hist_kwargs = dict(density=density, range=bin_range)
>>>>>>> REPLACE

### lib/matplotlib/axes/_axes.py
<<<<<<< SEARCH
        # If bins are not specified either explicitly or via range,
        # we need to figure out the range required for all datasets,
        # and supply that to np.histogram.
        if not input_empty and len(x) > 1:
            if weights is not None:
                _w = np.concatenate(w)
=======
        # If bins are not specified either explicitly or via range,
        # we need to figure out the range required for all datasets if density is False,
        # and supply that to np.histogram.
        if not input_empty and len(x) > 1 and not density:
            if weights is not None:
                _w = np.concatenate(w)
>>>>>>> REPLACE
