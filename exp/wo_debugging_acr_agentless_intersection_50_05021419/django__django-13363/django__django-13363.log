2025-05-02 15:21:28.376 | INFO     | swe_log:log_and_print:77 - ['test_trunc_timezone_applied_before_truncation (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests)']
2025-05-02 15:21:28.377 | INFO     | swe_log:log_and_print:77 - python -m pip install -e .
2025-05-02 15:21:28.377 | INFO     | swe_log:log_and_print:77 - ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 db_functions.datetime.test_extract_trunc
2025-05-02 15:21:28.377 | INFO     | swe_log:log_and_print:77 - /data/swe-fl/TMP/testbed/django__django-13363
2025-05-02 15:21:30.426 | INFO     | swe_log:log_msg:72 - Remove exist testbed_path: /data/swe-fl/TMP/testbed/django__django-13363
2025-05-02 15:21:47.654 | INFO     | swe_log:log_and_print:77 - Setup testbed environment: django__django-13363
2025-05-02 15:21:47.654 | INFO     | swe_log:log_and_print:77 - cd /data/swe-fl/TMP/testbed/django__django-13363 && source /root/miniforge3/bin/activate django__django__3.2            && cd /data/swe-fl/SRC/pysnooper_axel/dbgsnooper && python -m pip install -e . && cd /data/swe-fl/TMP/testbed/django__django-13363           && python -m pip install -e . && echo SUCCESS
2025-05-02 15:21:50.946 | INFO     | swe_log:log_msg:72 - Setup testbed: Done
2025-05-02 15:21:58.339 | INFO     | swe_log:log_and_print:77 - Query time: 2.25 seconds
2025-05-02 15:21:58.347 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_file("django/db/models/functions/datetime.py", "get_current_timezone_name"). Error: No matching method found for name: get_current_timezone_name in file: /data/swe-fl/TMP/testbed/django__django-13363/django/db/models/functions/datetime.py
2025-05-02 15:21:58.347 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_file("django/db/models/functions/datetime.py", "TimeZoneMixin"). Error: No matching class found for name: TimeZoneMixin in file: /data/swe-fl/TMP/testbed/django__django-13363/django/db/models/functions/datetime.py
2025-05-02 15:21:58.347 | INFO     | swe_log:log_and_print:77 - API call 1/4
2025-05-02 15:21:59.643 | INFO     | swe_log:log_and_print:77 - Query time: 1.30 seconds
2025-05-02 15:21:59.646 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_method_in_file("django/db/models/functions/datetime.py", "get_current_timezone_name"). Error: No matching method found for name: get_current_timezone_name in file: /data/swe-fl/TMP/testbed/django__django-13363/django/db/models/functions/datetime.py
2025-05-02 15:21:59.647 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_file("django/db/models/functions/datetime.py", "TimeZoneMixin"). Error: No matching class found for name: TimeZoneMixin in file: /data/swe-fl/TMP/testbed/django__django-13363/django/db/models/functions/datetime.py
2025-05-02 15:21:59.648 | INFO     | swe_log:log_and_print:77 - API call 2/4
2025-05-02 15:22:01.983 | INFO     | swe_log:log_and_print:77 - Query time: 2.33 seconds
2025-05-02 15:22:01.990 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_file("django/db/models/functions/datetime.py", "TimeZoneMixin"). Error: No matching class found for name: TimeZoneMixin in file: /data/swe-fl/TMP/testbed/django__django-13363/django/db/models/functions/datetime.py
2025-05-02 15:22:01.990 | INFO     | swe_log:log_and_print:77 - API call 3/4
2025-05-02 15:22:03.420 | INFO     | swe_log:log_and_print:77 - Query time: 1.43 seconds
2025-05-02 15:22:03.422 | INFO     | swe_log:log_and_print:77 - Error occurred when querying model.
No valid API call result.
Retrying..(1/5)
2025-05-02 15:22:07.400 | INFO     | swe_log:log_and_print:77 - Query time: 3.98 seconds
2025-05-02 15:22:07.403 | INFO     | swe_log:log_and_print:77 - Error occurred when invoking function call: search_class_in_file("django/db/models/functions/datetime.py", "TimeZoneMixin"). Error: No matching class found for name: TimeZoneMixin in file: /data/swe-fl/TMP/testbed/django__django-13363/django/db/models/functions/datetime.py
2025-05-02 15:22:07.404 | INFO     | swe_log:log_and_print:77 - API call 4/4
2025-05-02 15:22:08.394 | INFO     | swe_log:log_and_print:77 - Query time: 0.99 seconds
2025-05-02 15:22:13.114 | INFO     | swe_log:log_and_print:77 - Query time: 4.69 seconds
2025-05-02 15:22:13.118 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-02 15:22:13.119 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/django__django-13363/django/db/models/functions/datetime.py.bak
2025-05-02 15:22:13.120 | INFO     | swe_log:log_msg:72 - Applied 1 edits to django/db/models/functions/datetime.py
2025-05-02 15:22:13.120 | INFO     | swe_log:log_and_print:77 - Debugging process completed. Start evaluation
2025-05-02 15:22:14.310 | INFO     | swe_log:log_and_print:77 - fuzzy search matched and replaced
2025-05-02 15:22:14.310 | INFO     | swe_log:log_msg:72 - Created backup at /data/swe-fl/TMP/testbed/django__django-13363/django/db/models/functions/datetime.py.bak
2025-05-02 15:22:14.311 | INFO     | swe_log:log_msg:72 - Applied 1 edits to django/db/models/functions/datetime.py
2025-05-02 15:22:19.438 | INFO     | swe_log:log_msg:72 - CMD exec failed:
2025-05-02 15:22:19.439 | INFO     | swe_log:log_msg:72 - Testing against Django installed in '/data/swe-fl/TMP/testbed/django__django-13363/django'
Importing application db_functions
Skipping setup of unused database(s): other.
Operations to perform:
  Synchronize unmigrated apps: auth, contenttypes, messages, sessions, staticfiles
  Apply all migrations: admin, db_functions, sites
Synchronizing apps without migrations:
  Creating tables...
    Creating table django_content_type
    Creating table auth_permission
    Creating table auth_group
    Creating table auth_user
    Creating table django_session
    Running deferred SQL...
Running migrations:
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying db_functions.0001_setup_extensions... OK
  Applying db_functions.0002_create_test_models... OK
  Applying sites.0001_initial... OK
  Applying sites.0002_alter_domain_unique... OK
System check identified no issues (0 silenced).


2025-05-02 15:22:19.440 | INFO     | swe_log:log_msg:72 - STDERR:
2025-05-02 15:22:19.440 | INFO     | swe_log:log_msg:72 - Creating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
test_extract_day_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_duration (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... skipped "Database doesn't support feature(s): has_native_duration_field"
test_extract_duration_unsupported_lookups (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_duration_without_native_duration_field (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_hour_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_iso_weekday_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_iso_year_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_iso_year_func_boundaries (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_minute_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_month_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_none (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_quarter_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_quarter_func_boundaries (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_second_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_week_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_week_func_boundaries (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_weekday_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_year_exact_lookup (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_year_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_year_greaterthan_lookup (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_year_lessthan_lookup (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_date_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_date_none (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_day_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_hour_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_minute_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_month_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_none (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_quarter_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_second_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_subquery_with_parameters (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_time_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_time_none (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_week_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_trunc_year_func (db_functions.datetime.test_extract_trunc.DateFunctionTests) ... ok
test_extract_day_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_duration (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... skipped "Database doesn't support feature(s): has_native_duration_field"
test_extract_duration_unsupported_lookups (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_duration_without_native_duration_field (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_func_explicit_timezone_priority (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_func_with_timezone (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_hour_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_iso_weekday_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_iso_year_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_iso_year_func_boundaries (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_minute_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_month_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_none (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_quarter_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_quarter_func_boundaries (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_second_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_week_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_week_func_boundaries (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_weekday_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_year_exact_lookup (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_year_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_year_greaterthan_lookup (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_extract_year_lessthan_lookup (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_ambiguous_and_invalid_times (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_date_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_date_none (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_day_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_func_with_timezone (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_hour_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_minute_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_month_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_none (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_quarter_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_second_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_subquery_with_parameters (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_time_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_time_none (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_timezone_applied_before_truncation (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... FAIL
test_trunc_week_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok
test_trunc_year_func (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests) ... ok

======================================================================
FAIL: test_trunc_timezone_applied_before_truncation (db_functions.datetime.test_extract_trunc.DateFunctionWithTimeZoneTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/data/swe-fl/TMP/testbed/django__django-13363/tests/db_functions/datetime/test_extract_trunc.py", line 1142, in test_trunc_timezone_applied_before_truncation
    self.assertEqual(model.pacific_date, pacific_start_datetime.date())
AssertionError: datetime.date(2016, 1, 1) != datetime.date(2015, 12, 31)

----------------------------------------------------------------------
Ran 79 tests in 0.324s

FAILED (failures=1, skipped=2)
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...

ERROR conda.cli.main_run:execute(125): `conda run ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 db_functions.datetime.test_extract_trunc` failed. (See above for error)

